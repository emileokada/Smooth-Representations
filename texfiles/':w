\documentclass{memoir}

\input{header}
\title{Smooth representations of locally profinite groups}
\author{Emile T. Okada}

\begin{document}
\maketitle
\tableofcontents
\chapter{Pro-\texorpdfstring{$\mathcal C$}{C} groups}
\section{Topological preliminaries}
\section{Pro-\texorpdfstring{$\mathcal C$}{C} groups}
\begin{thm}
    Let $\mathcal C$ be a formation of finite groups.
    Then the following are equivalent.
    \begin{enumerate}
        \item $G$ is a pro-$\mathcal C$ group;
        \item $G$ is compact Hausdorff totally disconnected, and for each open normal subgroup $U$ of $G$, $G/U\in \mathcal C$;
        \item $G$ is compact and the identity element $1$ of $G$ admits a fundamental system $\mathcal U$ of open neighbourhoods $U$ such that $\bigcap_{U\in\mathcal U} U = 1$ and each $U$ is an open normal subgroup of $G$ with $G/U\in \mathcal C$;
        \item The identity element $1$ of $G$ admits a fundamental system $\mathcal U$ of open neighbourhoods $U$ such that each $U$ is a normal subgroup of $G$ with $G/U\in\mathcal C$, and 
            \begin{equation}
                \varprojlim_{U\in\mathcal U}G/U.
            \end{equation}
    \end{enumerate}
\end{thm}
\chapter{Smooth Representations of Locally Profinite Groups}
\section{Locally profinite groups}
\begin{definition}
    \textit{A locally profinite group} is a topological group $G$ such that every open neighbourhood of the identity in $G$ contains a compact open sub-group of $G$.
\end{definition}
\begin{proposition}
    Let $G$ be a locall profinite group.
    \begin{enumerate}
        \item Closed subgroups of $G$ are locally profinite.
        \item Quotients of $G$ by closed normal subgroups are locally profinite.
    \end{enumerate}
\end{proposition}
\begin{proposition}
    Let $G$ be a compact locally profinite group then the map 
    \begin{equation}
        G\to \varinjlim G/K
    \end{equation}
    is a topological isomorphism, where $K$ ranges over all open normal subgroups of $G$.
\end{proposition}
\begin{proposition}
    A topological group $G$ is locally profinite iff $G$ is locally compact and totally disconnected.
\end{proposition}
\begin{proposition}
    Let $\set{K_n}_n$ be a decreasing sequence of compact open subgroups of $G$ such that $\cap_nK_n = \set{e}$.
    Then for any neighbourhood $U$ of $e$ there is an $n$ such that $K_n\subseteq U$.
\end{proposition}
\section{Smooth representations}
\begin{definition}
    Let $G$ be a locally profinite group and $(\pi,V)$ a complex representation of $G$.
    $(\pi,V)$ is \textit{smooth} if for every $v\in V$ there is a compact open subgroup $K$ of $G$ such that $v\in V^K$.
    
    $(\pi,V)$ is \textit{admissable} if the space $V^K$ is finite dimensional for each compact open subgroup $K$ of $G$.
\end{definition}
\begin{proposition}
    Let $(\pi,V)$ be a smooth representation.
    Then subrepresentations and quotients are also smooth.
\end{proposition}
\subsection{Characters}
\begin{proposition}
    Let $\psi:G\to \C^\times$ be a group homomorphism.
    The following are equivalent
    \begin{enumerate}
        \item $\psi$ is continuous,
        \item $\ker \psi$ is open,
        \item $\ker \psi$ contains an open set,
        \item the corresponding representation on $\C$ is smooth.
    \end{enumerate}
\end{proposition}
\begin{proof}
    $(4)\Leftrightarrow (3) \Leftrightarrow (2) \Rightarrow (1)$ clear.
    $(1)\Rightarrow(2)$ Let $U$ be an open subset of $\C^\times$.
    Then $\psi^{-1}(U)$ is open and so contains an open compact subgroup $K$.
    For $U$ sufficiently small, it contains no non-trivial subgroups of $\C^\times$ and so $K\subseteq \ker\psi$.
\end{proof}
\begin{definition}
    We call a homomorphism $\psi:G\to \C^\times$ that satisfies any of the above conditions a chcaracter of $G$.
\end{definition}
\begin{proposition}
    If $\psi:G\to \C^\times$ is a character and $G$ is a union of its open compact subgroups, then $\psi(G)\subseteq S^1$.
\end{proposition}
\begin{definition}
    Let $\psi\in \hat F$, $\psi\ne 1$.
    The level of $\psi$ is least $d\in \Z$ such that $\mf p^d\subseteq \ker\psi$.
\end{definition}
\begin{proposition}
    Let $\psi\in \hat F$, $\psi\ne 1$, have level $d$.
    Let $a\in F$.
    The map $a\psi:x\mapsto \psi(ax)$ is a character of $F$.
    If $a\ne 0$, the character has level $d-\nu_F(a)$.
\end{proposition}
\begin{proposition}
    Let $\psi\in \hat F$, $\psi\ne 1$, have level $d$.
    Then the map $a\mapsto a\psi$ is a group isomorphism $F\to \hat F$ .
\end{proposition}
\begin{proof}
    Let $\theta\in \hat F, \theta \ne 1$ have level $l$.
    Let $\bar w$ be a prime element of $F$ and $u\in U_F$.
    Then $u\bar w^{d-l}\psi$ has level $d$ and so agrees with $\psi$ on $\mf p^l$.
    Note that $u\bar w^{d-l}\psi$ and $u'\bar w^{d-l}\psi$ for $u,u'\in U_F$ agree on $\mf p^{l-1}$ iff $u\equiv u' \pmod{\mf p}$.
    Moreover, $\mf p^{l-1}$ has $q-1$ characters that are trivial on $\mf p^l$.
    As $u$ ranges over $U_F/U_F^1$, the $q-1$ characters $u\bar w^{d-l}\psi|_{\mf p^{l-1}}$ are distinct, non-trivial, but trivial on $\mf p^l$.
    Thus, one of them must equal to $\theta|_{\mf p^{l-1}}$.
    Call the corresponding $u$, $u_1$.
    Iterating we obtain a sequence of $u_n\in U_F$ such that $u_n\bar w^{d-l}\psi$ agrees with $\theta$ on $\mf p^{l-n}$ and $u_{n+1}\equiv u_n\pmod{\mf p^n}$.
    Thus the sequence $\set{u_n}$ must converge to some $u\in U_F$ and we have $\theta = u\bar w^{d-l}\psi$.
\end{proof}
\subsection{Semisimplicity}
\begin{proposition}
    If $G$ is compact then any smooth representation is semi-simple.
    %Leave semi-simple. It is for the line break
\end{proposition}
\begin{proof}
    Let $v\in V$ and $K\subseteq G$ be an open compact subgroup such that $v\in V^K$.
    $G$ is compact and so $\abs{G:K}<\infty$.
    Thus $W = \C Gv$ is finite dimensional.
    Moreover, if we let $K' = \cap_{g\in G/K}gKg^{-1}$ then this is a open normal subgroup of $G$ and $K'$ acts triviall on $W$.
    Thus $W$ descends to a $G/K'$ representation.
    But $G/K'$ is finite and so $W$ is a sum of its simple submodules.
    It follows that the same holds for $V$ and so $V$ is semisimple.
\end{proof}
\begin{corollary}
    If $G$ is compact then any irreducible smooth representation is finite dimensional.
\end{corollary}
\begin{corollary}
    Let $G$ be a locally profinite group, and let $K$ be a compact open subgroup of $G$. 
    Let $(V,\pi)$ be a smooth representation of $G$.
    Then $\Res_K^GV$ is semisimple.
\end{corollary}
\begin{proposition}
    Let $G$ be a locally profinite group, $K$ a compact open subgroups of $G$ and $(\pi,V)$ a smooth representation of $G$.
    \begin{enumerate}
        \item
            \begin{equation}
                V = \bigoplus_{\phi \in \hat K}V^\rho.
            \end{equation}
        \item Let $(\sigma,W)$ be a representation of $G$ and $f:V\to W$ a $G$-homomorphism.
            Then for every $\rho\in \hat K$ we have $f(V^\rho)\subseteq W^\rho$ and $W^\rho\cap f(V) = f(V^\rho)$.
    \end{enumerate}
\end{proposition}
\begin{corollary}
    Let $U\to V\to W$ be a sequence of smooth representations of $G$.
    The sequence is exact iff $U^K\to V^K\to W^K$ is exact (as vector spaces) for all compact open subgroups $K$ of $G$.
\end{corollary}
\begin{definition}
    If $H$ is a subgroup of $G$, we define 
    \begin{equation}
        V(H) = \text{span}\set{v-\pi(h)v:v\in V,h\in H}.
    \end{equation}
\end{definition}
\begin{corollary}
    Let $G$ be a locally profinite group, and let $(\pi, V)$ be a smooth representation of $G$.
    Let $K$ be a compact open subgroup of $G$.
    Then
    \begin{equation}
        V(K) = \bigoplus_{\rho\in \hat K\backslash\set{1}}V^\rho
    \end{equation}
    is the unique $K$-complement to $V^K$ in $V$.
\end{corollary}
\begin{proof}
    Consider the map $V\to V^K$ given by quotienting by $\bigoplus_{\rho\in \hat K\backslash\set{1}}V^\rho$.
    $V(K)$ must lie in the kernel so we have on inclusion.
    Conversly, if $U$ is an irreducible $K$-subrepresentation of $V$ not isormophic to the trivial representation the $U(K) = U$ and so we get the other inclusion.
\end{proof}
\begin{proposition}
    Let $(\pi,V)$ be an aribitrary representation.
    Define $V^\infty = \bigcup_KV^K$, where $K$ ranges over compact open subgroups of $G$.
    Then $V^\infty$ is a smooth subrepresentation of $G$.
\end{proposition}
\begin{proposition}
    Let $(\pi,V)$ be a smooth representation of $G$, and $(\sigma,W)$ be an arbitrary representation.
    Then every morphism $f:V\to W$ factors through $W^\infty$.
\end{proposition}
\begin{corollary}
    $(-)^\infty:\Rep_G\to \Smo_G$ is a functor.
\end{corollary}
\begin{thm}
    Let $i:\Smo_G\to \Rep_G$ be the inclusion functor.
    Then $i\dashv (-)^\infty$.
\end{thm}
\subsection{Induction}
\begin{definition}
    Let $G$ be a locally profinite group, $H$ a closed or open subgroup and $(\sigma,W)$ be a smooth representation of $H$.
    Define $\sInd_H^G(W) = (\Ind_H^G(W))^\infty$.
    Note that if $(\pi,V)$ is a smooth $G$ representation then so is $\Res_H^G(V)$.
    Write $\sRes$ for the functor between $\Smo_G\to\Smo_H$.
\end{definition}
\begin{proposition}
    $\sRes_H^G\dashv \sInd_H^G$.
\end{proposition}
\begin{proof}
    Let $V$ be a $G$-representation and $W$ be a $H$-representation.
    Let $\alpha_W:\sInd_H^G(W)\to W$ be the $H$-homomorphism $f\mapsto f(e)$.
    Then we have the maps
    \begin{align}
        \Hom(\sRes_H^G(V),W) &\leftrightarrow \Hom(V,\sInd_H^G(W)) \\
        \phi &\mapsto  (v\mapsto (g\mapsto \phi(gv)) \\
        \alpha_W\circ\psi &\mapsfrom \psi.
    \end{align}
    It is straightforward to check that these maps are mutually inverse.
\end{proof}
\begin{proposition}
    $\sInd_H^G$ is exact.
\end{proposition}
\begin{definition}
    Let $G$ be a locally profinite group, $H$ a closed or open subgroup and $(\sigma,W)$ be a smooth representation of $H$.
    Define $\cInd_H^G(W)$ to be the subset of $\sInd_H^G(W)$ consisting of functions with compact support modulo $H$ i.e. the image of $\supp(f)$ in $H\backslash G$ is compact.
    It is an easy check to see that $\cInd_H^G(W)$ yields a subrepresentation of $\sInd_H^G(W)$.
\end{definition}
\begin{lemma}
    Let $G$ be a locally profinite group, $H$ a subgroup, and $K$ a open compact subgroup.
    Then 
    \begin{enumerate}
        \item $K$-orbits in $H\backslash G$ are open and compact.
        \item If a subset $C\subseteq H\backslash G$ is compact it lies in the union of finitely many $K$-orbits.
    \end{enumerate}
\end{lemma}
\begin{proposition}
    Let $f\in \sInd_H^G(W)$.
    Then $f$ has compact support modulo $H$ iff $\supp(f) \subseteq H\cdot C$ for some $C\subseteq G$ compact.
\end{proposition}
\begin{proof}
    $f\in\sInd_H^G(W)$ so there is a compact open subgroup $K$ such that $K$ stabilises $f$.
    It follows that the support of $f$ is a union of double $(H,K)$ cosets.
    Let $q:G\to H\backslash G$ be the quotient map.
    Then $q(\supp(f))$ is a union of $K$-orbits.

    $(\Rightarrow)$ Suppose $q(\supp(f))$ is compact.
    By the lemma it is a finite union of $K$-orbits.
    Thus $\supp(f)$ is a union of finitely many double $(H,K)$-cosets.
    Let $g_1,\dots,g_n$ be double coset representatives.
    Then $\supp(f) = H\cdot (\cup_ig_iK)$ where $\cup_ig_iK$ is compact (and open).

    $(\Leftarrow)$ Suppose $\supp(f)\subseteq H\cdot C$ with $C$ compact.
    Then $q(H\cdot C) = q(C)$ is compact and so lies in a finite union of $K$ orbits.
    But $q(\supp(f))\subseteq q(C)$ and so $q(\supp(f))$ must be a finite union of $K$-orbits and hence must be compact.
\end{proof}
\begin{remark}
    The proposition is also true if we insist that $C$ is open.
\end{remark}
\begin{proposition}
    $\cInd_H^G$ is exact.
\end{proposition}
\begin{proposition}
    Let $H$ be an open subgroup of $G$, and $\phi\in \Ind_H^G(W)$ be compactly supported modulo $H$.
    Then $\phi\in \cInd_H^G(W)$.
\end{proposition}
\begin{proof}
    Since $H$ is open and $\phi$ is compactly supported modulo $H$, $supp(\phi) = \cup_{i=1}^n Hg_i$ for some $g_i\in G$.
    Let $L = \cap_{i=1}^nH^{g_i}$ and let $K$ be a compact open subgroup of $G$ such that $f(g_1),\dots,f(g_n)\in W^K$.
    Then $L\cap K$ is a compact open subgroup of $G$ (as $L$ is open and hence closed) and for $x\in K\cap K$ we have
    \begin{align}
        (x\phi)(hg_i) &= \phi(hg_ix) = h\phi(g_ixg_i^{-1}g_i) \nonumber \\
                      &= h(g_ixg_i^{-1})\phi(g_i) = h\phi(g_i) = \phi(hg_i).
    \end{align}
    This $L\cap K$ fixes $\phi$ and so $\phi\in \cInd_H^G(W)$.
\end{proof}
\begin{definition}
    Let $H$ be an open subgroup of $G$ and $W$ an $H$ representation.
    Then there is a $H$-homomorphism $\alpha_W^c:W\to \cInd_H^G$ given by $w\mapsto f_w$ where $f_w$ is the function that sends $h$ to $h.w$ and is $0$ outside of $H$.
    By the previous proposition, this does indeed lie in $\cInd_H^G(W)$.
\end{definition}
\begin{lemma}
    Let $H$ be an open subgroup of $G$, and let $W$ be a representation of $H$.
    Then
    \begin{enumerate}
        \item The map $\alpha_W^c$ is an $H$-isomorphism with the space of functions $f\in\cInd_H^G(W)$ such that $\supp(f)\subseteq H$.
        \item  If $\mathcal W$ is a basis for $W$ and $\mathcal G$ a choice of representatives for $G/H$, then $\set{gf_w:w\in \mathcal W,g\in \mathcal G}$ is a basis for $\cInd_H^G(W)$.
    \end{enumerate}
\end{lemma}
\begin{thm}
    Let $H$ be an open subgroup of $G$, $W$ an $H$-representation and $V$ a $G$-representation.
    Then there is a natural bijection 
    \begin{equation}
        \Hom_G(\cInd_H^G(W),V) \leftrightarrow \Hom_H(W,\Res_H^G(V)).
    \end{equation}
\end{thm}
\begin{proof}
    We have the maps
    \begin{align}
        \Hom_G(\cInd_H^G(W),V) &\leftrightarrow \Hom_H(W,\Res_H^G(V)) \\
        \phi &\mapsto \phi\circ \alpha_W^c \\
        (gf_w \mapsto g\psi(w)) &\mapsfrom \psi.
    \end{align}
    It is starightforward to check that the second map is well-defined and that these maps are mutually inverse.
\end{proof}
\begin{proposition}
    Let $V$ be a smooth representation of $G$, admitting $\chi$ as a central character. 
    Let $K$ be an open subgroup of $G$ such that $KZ/Z$ is compact.
    \begin{enumerate}
        \item Let $v\in V$.
            The $KZ$-space spanned by $v$ is finite dimensional, and is a sum of irreducible $KZ$-spaces.
        \item As representation of $KZ$, the space $V$ is semisimple.
    \end{enumerate}
\end{proposition}
\section{Irreducible representations and the contragredient}
\begin{remark}
    From now on assume that $G/K$ is countable for any compact open subgroup $K$ of $G$.
\end{remark}
\begin{lemma}
    Let $V$ be an irreducible smooth representation of $G$.
    Then $\dim_\C V$ is countable.
\end{lemma}
\begin{lemma}
    (Schur's lemma). If $V$ is an irreducible smooth representation of $G$, then $\End_G(V) = \C$.
\end{lemma}
\begin{corollary}
    Let $V$ be an irreducible smooth representation of $G$.
    Then the central character of $V$ is smooth.
\end{corollary}
\begin{corollary}
    If $G$ is abelian then any irreducible smooth representation of $G$ is $1$-dimensional.
\end{corollary}
\begin{definition}
    Let $V$ be a smooth $G$-representation.
    We define the contragredient, or smooth dual, of $V$ to be $\check V = (V^*)^\infty$.
\end{definition}
\begin{remark}
    If $K\le G$ is a compact open subgroup of $G$, then for any $f\in (\check V)^K$, $f(V(K)) = 0$.
\end{remark}
\begin{proposition}
    \label{prop:dual}
    Restriction to $V^K$ induces an isomorphism 
    \begin{equation}
        (\check V)^K \cong (V^K)^*.
    \end{equation}
\end{proposition}
\begin{thm}
    The canonical morphism $V\to \check{\check V}$ is an isomorphism iff $V$ is admissable.
\end{thm}
\begin{proposition}
    The contravariant functor $\vee:\Rep(G) \to \Rep(G)$ is exact.
\end{proposition}
\begin{proof}
    Follows from proposition \ref{prop:dual}.
\end{proof}
\begin{corollary}
    Let $V$ be an admissable representation. 
    Then $V$ is irreducible iff $\check V$ is irreducible.
\end{corollary}
\begin{proposition}
    Let $V$ and $W$ be smooth representations of $G$, and $\mathcal P(V,W)$ be the space of $G$-invariant bilinear pairings $V\times W\to \C$.
    Then there are isomorphisms
    \begin{equation}
        \Hom_G(V,\check W) \cong \mathcal P(V,W) \cong \Hom_G(W,\check V).
    \end{equation}
\end{proposition}
\section{Measures}
\begin{proposition}
    Let $C_c^\infty(G)$ be the space of locally constant functions on $G$ with compact support.
    Then $(C_c^\infty(G),\lambda)$ and $(C_c^\infty,\rho)$ are both smooth.
\end{proposition}
\begin{remark}
    Suppose a function $f:G\to \C$ is fixed by $\rho(K)$ (or $\lambda(K)$) for $K$ a compact open subgroup $K$ of $G$.
    Then $f$ has compact support iff $\supp(f)\subseteq C$ for some compact set $C$.
\end{remark}
\begin{definition}
    A right Haar integral on $G$ is a non-zero $G$-homomorphism $I:(C_c^\infty(G),\rho)\to \C$ such that $I(f)\ge 0$ for any $f\in C_c^\infty(G)$, $f\ge 0$.
\end{definition}
\begin{thm}
    There exists a unique right Haar integral $I:C_c^\infty(G)\to \C$ up to scaling.
\end{thm}
\begin{proof}
    Let $K$ be a compact open subgroup of $G$ and write $^KC_c^\infty$ for the subspace $(C_c^\infty(G))^{\lambda(K)}$.
    Then $^KC_c^\infty(G) = \cInd_K^G1_K$.
    It follows that
    \begin{equation}
        \dim_\C\Hom_G(^KC_c^\infty(G),\C) = 1.
    \end{equation}
    If $f_{K,g}$ denotes the indicator function on the coset $Kg$, then the map 
    \begin{equation}
        I_K:^KC_c^\infty(G)\to \C, f_{K,g}\mapsto 1
    \end{equation}
    is a $G$-homomorphism and so all $G$-homomorphisms $^KC_c^\infty\to \C$ are a multiple of this map.

    Now let $\set{K_n}_n$ be a descending sequence of compact open subgroups of $G$ such that $\cap_nK_n = \set{e}$.
    Then $\set{^{K_n}C_c^\infty(G)}_n$ is an ascending sequence of subspaces of $C_c^\infty(G)$ such that $C_c^\infty(G) = \cup_n \hphantom{ }^{K_n}C_c^\infty(G)$.
    Let $I_n = I_{K_n}/\abs{K_1:K_n}$.
    Then 
    \begin{equation}
        I_{n+1}(f_{g,K_n}) = \abs{K_n:K_{n+1}}/\abs{K_1:K_{n+1}} = 1/\abs{K_1:K_n} = I_n(f_{g,K_n}).
    \end{equation}
    It follows that $I_{n+1}|_{^{K_n}C_c^\infty(G)} = I_n$ and so we can define a $G$-homomorphism $I:C_c^\infty(G)\to \C$.
    It is clear that this map is a right Haar measure.

    Now suppose $I'$ is another Haar measure.
    Then there are $\alpha_n\in\C$ such that $I'|_{^{K_n}C_c^\infty(G)} = \alpha_n\cdot I_n$ for all $n$.
    Evaluating at the $f_{g,K_n}$ gives that $\alpha_n = \alpha_{n+1} =: \alpha$ for all $n$ and so $I' = \alpha I$.
\end{proof}
\begin{remark}
    If $f\ge0$ and there exists a $g\in G$ such that $f(g)>0$ then $I(f)>0$.
\end{remark}
\begin{definition}
    Define $\vee:C_c^\infty(G)\to C_c^\infty(G)$ by $f\mapsto \check f$ where $\check f(g) = f(g^{-1})$.
    Then $\vee:(C_c^\infty(G),\lambda)\to (C_c^\infty(G),\rho)$ is a $G$-isomorphism.
\end{definition}
\begin{remark}
    $\vee$ induces a bijection between left and right Haar measures.
\end{remark}
\begin{definition}
    Let $I$ be a left Haar measure on $G$.
    For a non-empty compact open subset $S$ of $G$, let $\Gamma_S$ denote its characteristic function.
    We define 
    \begin{equation}
        \mu_G(S) = I(\Gamma_S).
    \end{equation}
    Then $\mu_G(gS) = \mu_G(S)$ for all $g\in G$.
\end{definition}
\begin{remark}
    We have that $I(f) = \int_Gfd\mu_G$ for $f\in C_c^\infty(G)$.
\end{remark}
\begin{definition}
    We can extend the domain of Haar integration as follows.
    Let $\mu_G$ be a left Haar measure on $G$, and $f$ be a function on $G$ invariant under left translation by a compact open subgroup $K$ of $G$.
    If the series 
    \begin{equation}
        \sum_{g\in K\backslash G}\int_{Kg}\abs{f(x)}d\mu_G(x)
    \end{equation}
    converges define
    \begin{equation}
        \int_Gf(x)d\mu_G(x) = \sum_{g\in K\backslash G}\int_{Kg}f(x)d\mu_G(x).
    \end{equation}
\end{definition}
\begin{proposition}
    This definition does not depend on $K$ and is left translation invariant.
\end{proposition}
\begin{proof}
    Let $K'$ be any other compact open subgroup of $G$.
    Then $K\cap K'$ has finite index in $K$ and $K'$.
    It follows that 
    \begin{align}
        \sum_{g\in K\backslash G}\int_{Kg}\abs{f(x)}d\mu_G(x) &= \sum_{g\in K\backslash G}\sum_{h\in K\cap K'\backslash K}\int_{K\cap K' hg}\abs{f(x)}d\mu_G(x) \nonumber \\
                                                              &= \sum_{g\in K\cap K'\backslash G}\int_{K\cap K' g}\abs{f(x)}d\mu_G(x) \nonumber \\
                                                              &= \sum_{g\in K'\backslash G}\sum_{h\in K\cap K'\backslash K'}\int_{K\cap K' hg}\abs{f(x)}d\mu_G(x) \nonumber \\
                                                              &= \sum_{g\in K'\backslash G}\int_{K' g}\abs{f(x)}d\mu_G(x)
    \end{align}
    and all series converge.
    It follows that the same series but without absolute values converge, and so we obtain the first part of the proposition.

    For the second part let $y\in g$.
    Then $\set{yg:g\in K\backslash G}$ is a set of coset representatives for $yKy^{-1}\backslash G$ and
    \begin{align}
        \sum_{g\in K\backslash G}\int_{yKy^{-1}\cdot yg}\abs{\lambda_yf(x)}d\mu_G(x) &= \sum_{g\in K\backslash G}\int_{G}1_{yKy^{-1}yg}(x)\abs{\lambda_yf(x)}d\mu_G(x) \nonumber \\
                                                                                     &= \sum_{g\in K\backslash G}\int_{G}\lambda_y(1_{Kg}(x)\abs{f(x)})d\mu_G(x) \nonumber \\
                                                                                     &= \sum_{g\in K\backslash G}\int_{Kg}\abs{f(x)}d\mu_G(x).
    \end{align}
    Thus $\int_G\lambda_yfd\mu_G$ is defined and the above calculation, but without absolute values, shows that it is equal to $\int_Gfd\mu_G$.
\end{proof}
\begin{proposition}
    Let $G_1,G_2$ be locally profinite groups.
    Then the natural map $C_c^\infty(G_1)\otimes_\C C_c^\infty(G_2)\to C_c^\infty(G_1\times G_2)$ is an isomorphism that respects both left and right translation.
\end{proposition}
\begin{proposition}
    If $\mu_1,\mu_2$ are left Haar measures then the map 
    \begin{equation}
        \mu:C_c^\infty(G_1\times G_2)\to \C
    \end{equation}
    defined via the above isomorphism is also a left Haar measure.
\end{proposition}
\begin{proposition}
    Let $f\in G_1\times G_2$.
    Then the function
    \begin{equation}
        f_1(g_1) = \int_{G_2}f(g_1,g_2)d\mu_2(g_2)
    \end{equation}
    lies in $C_c^\infty(G_2)$ and 
    \begin{equation}
        \int_{G_1\times G_2} f(g) d\mu_G(g) = \int_{G_1}f_1(g_1)d\mu_1(g_1).
    \end{equation}
\end{proposition}
\begin{definition}
    Let $\mu_G$ be a left Haar measure on $G$.
    For $g\in G$, $f\mapsto \int_G\rho_gfd\mu_G$ is another left Haar measure.
    It follows that there is a unique $\delta_G(g)\in \R_+^\times$ such that 
    \begin{equation}
        \delta_G(g) \int_G\rho_gfd\mu_G = \int_Gfd\mu_G.
    \end{equation}
    This map $\delta_G:G\to \R_+^\times$ is a homomorphism.
\end{definition}
\begin{proposition}
    $\delta_G$ is trivial on open compact subgroups of $G$.
\end{proposition}
\begin{proposition}
    A homomorphism $\psi:G\to R_+^\times$ is a character iff it is trivial on compact open subgroups.
\end{proposition}
\begin{corollary}
    $\delta_G$ is a character.
\end{corollary}
\begin{proposition}
    $\delta_G$ is trivial iff $G$ is unimodular.
\end{proposition}
\begin{proposition}
    The functional $f\mapsto \int_G\delta_G(x)^{-1}f(x)d\mu_G(x)$ is a right Haar integral.
\end{proposition}
\begin{proof}
    \begin{align}
        \rho_yf\mapsto \int_G\delta_G(x)^{-1}\rho_yf(x)d\mu_G(x) &= \delta_G(y)\int_G\rho_y(\delta_G(x)^{-1}f(x))d\mu_G(x) \nonumber \\
                                                                 &= \int_G\delta_G(x)^{-1}f(x)d\mu_G(x).
    \end{align}
\end{proof}
\begin{proposition}
    Let $K$ be a compact open subgroup of $G$ and $g\in G$.
    Then $\mu_G(gKg^{-1}) = \delta_G(g)^{-1}\mu_G(K)$.
\end{proposition}
\begin{definition}
    Let $H$ be a closed subgroup of $G$, $\theta:H\to \C^\times$ a character and $C_c^\infty(H\backslash G,\theta) = \cInd_H^G(\theta)$.
\end{definition}
\begin{definition}
    Let $\mu_H$ be a left Haar measure on $H$.
    Define the map $\sim:(C_c^\infty(G),\rho)\to C_c^\infty(H\backslash G,\theta)$ by
    \begin{equation}
        \tilde f(g) = \int_H (\theta\delta_H)^{-1}\rho_gfd\mu_H.
    \end{equation}
    This map is a $G$-homomorphism and 
    \begin{equation}
        \widetilde{(\lambda_hf)} = (\theta\delta_H)(h)^{-1}\tilde f
    \end{equation}
    for $f\in C_c^\infty(G),h\in H$.
\end{definition}
\begin{lemma}
    $\sim$ is surjective.
\end{lemma}
\begin{proof}
    Let $K$ be an open compact subgroup of $G$.
    Then each double coset $HgK$ supports at most a 1-dimensional subspace of $C_c^\infty(H\backslash G,\theta)^K$ and these spaces span $C_c^\infty(H\backslash G,\theta)^K$.
    But each $1_{gK}\in (C_c^\infty(G))^K$ maps to a non-zero element of $C_c^\infty(H\backslash G,\theta)^K$ with support $HgK$ and so the map is surjective.
\end{proof}
\begin{corollary}
    Let $\theta:H\to \C^\times$ be a character of $H$ and $I$ a right Haar intgral on $G$.
    Then $\Hom_G((C_c^\infty(H\backslash G,\theta),\rho),\C) \ne 0$ iff $I$ factors through $C_c^\infty(H\backslash G,\theta)$.
\end{corollary}
\begin{corollary}
    $\dim_\C\Hom_G((C_c^\infty(H\backslash G,\theta),\rho),\C) = 0$ or $1$.
\end{corollary}
\begin{remark}
    Let $K$ be a open compact subgroup of $G$, $g\in G$ and $f = 1_{gK}$.
    Suppose $\delta_G|_H = \theta \delta_H$.
    Let $x\in G$. 
    Then 
    \begin{equation}
        \tilde f(x) = \int_H (\theta\delta_H)(h)^{-1}1_{gKx^{-1}}(h) d\mu_H(h).
    \end{equation}
    But $h\in gKx^{-1}$ iff $x = h^{-1}gk$ for some $k\in K$.
    Thus $\tilde f(x)$ is $0$ if $x\not\in HgK$.
    If $x\in HgK$ write $x = h_0gk_0$ and $L = gKg^{-1}\cap H$.
    Then 
    \begin{align}
        \tilde f(x) &= \int_H (\theta\delta_H)(h)^{-1}1_{Lh_0^{-1}}(h) d\mu_H(h) \nonumber \\
                    &= (\theta\delta_H)(h_0) \int_H \rho_{h_0}((\theta\delta_H)^{-1}1_{L})(h) d\mu_H(h) \nonumber \\
                    &= \theta(h_0)\int_L (\theta\delta_H)(h)^{-1}d\mu_H(h).
    \end{align}
    But $\delta_G$ is trivial on $L$ and so $\tilde f(x) = \theta(h_0)\mu_H(L)$.
    It follows that 
    \begin{equation}
        \widetilde{1_{h_igK}}(hgk) = \theta(h)\delta_G(h_i)^{-1}\mu_H(L).
    \end{equation}
\end{remark}
\begin{lemma}
    \label{lem:I_ker}
    Suppose $\delta_G|_H = \theta \delta_H$ and let $I$ denote the right Haar integral 
    \begin{equation}
        f\mapsto \int_G\delta_G(x)^{-1}f(x)d\mu_G(x).
    \end{equation}
    If $\tilde f = 0$ then $I(f) = 0$.
\end{lemma}
\begin{proof}
    Suppose $f$ is fixed by $K$.
    It suffices to check the case when $f$ is of the form $\sum_i\alpha_i1_{h_igK}$ for $\alpha_i\in \C$ and the $h_igK$ distinct cosets.
    Then by the remark $\tilde f = 0$ implies that $\sum_i\alpha_i\delta_G(h_i)^{-1} = 0$.
    But 
    \begin{equation}
        I(1_{h_igK}) = \delta_G(h_ig)^{-1}\mu_G(K)
    \end{equation}
    and so 
    \begin{equation}
        I(f) = \mu_G(K)\delta_G(g)^{-1}\sum_i\alpha_i\delta_G(h_i)^{-1} = 0.
    \end{equation}
\end{proof}
\begin{thm}
    Let $\theta:H\to \C^\times$ be a character of $H$.
    The following are equivalent:
    \begin{enumerate}
        \item $\Hom_G((C_c^\infty(H\backslash G,\theta),\rho),\C) \ne 0$
        \item $\theta\delta_H = \delta_G|_H$.
    \end{enumerate}
\end{thm}
\begin{proof}
    $(1)\Rightarrow (2)$ Let $0\ne I_\theta\in \Hom_G((C_c^\infty(H\backslash G,\theta),\rho),\C)$ be such that the right Haar integral $I:f\mapsto \int_G\delta_G(x)^{-1}f(x)d\mu_G(x)$ is equal to $I_\theta(\tilde f)$.
    Note that elements of the form $\lambda_hf-(\theta\delta_H)(h)^{-1}f$ map to zero under $\sim$ and so we get
    \begin{align}
        0 = I(\lambda_hf-(\theta\delta_H)(h)^{-1}f) &= \int_G\delta_G(x)^{-1}(\lambda_hf-(\theta\delta_H)(h)^{-1}f)d\mu_G(x) \nonumber \\
                                                    &= \left(\delta_G(h)^{-1}-(\theta\delta_H)(h)^{-1}\right)I(f).
    \end{align}
    Picking an $f$ such that $I(f)\ne 0$ we get that $\delta_G|_H = \theta\delta_H$.

    $(2)\Rightarrow(1)$ By lemma \ref{lem:I_ker}, if $\tilde f = 0$ then $I(f) = 0$.
    The result follows.
\end{proof}
\begin{corollary}
    Suppose $\theta\delta_H = \delta_G|_H$.
    Then there is a non-zero $I_\theta:(C_c^\infty(G),\rho)\to \C$ such that $I_\theta(f)\ge0$, whenever $f\ge0$.
\end{corollary}
\begin{definition}
    If $H$ is a closed subgroup of $G$ define $\delta_{H\backslash G} = \delta_H^{-1}\delta_G|_H:H\to \R_+^\times$.
    Write $\mu_{H\backslash G}$ for 
    \begin{equation}
        I_{\delta_{H\backslash G}}(f) = \int_{H\backslash G}f(g)d\mu_{H\backslash G}(g)
    \end{equation}
    where $f\in C_c^\infty(H\backslash G,\delta_{H\backslash G})$.
\end{definition}
\begin{proposition}
    \label{prop:semi_inv_eq}
    Let $f\in C_c^\infty(H\backslash G,\delta_{H\backslash G})$.
    If $f$ is fixed by the compact open subgroup $K$ of $G$ then
    \begin{equation}
        \int_{H\backslash G}f(g)d\mu_{H\backslash G}(g) = \sum_{g\in H\backslash G/K}\frac{\mu_G(K^g)}{\mu_H(H\cap K^g)}f(g)
    \end{equation}
    where $K^g = gKg^{-1}$.
\end{proposition}
\begin{proof}
    Suppose $\supp(f)\subseteq HgK$.
    Write $H^g = H\cap K^g$.
    Then $f = \tilde h$ where $h=c1_{gK}$ for some constant $c$.
    Thus $f(g) = \tilde h(g) = c\mu_H(H^g)$ and so $c = f(g)/\mu_H(H^g)$.
    But 
    \begin{equation}
        I_{\delta_{H\backslash G}}(f) = I(h) = \int_G\delta_G(x)^{-1}c1_{gK}(x)d\mu_G(x) = \frac{\mu_G(K)f(g)}{\mu_H(H^g)\delta_G(g)}.
    \end{equation}
    The result follows from $\mu_G(K)/\delta_G(g) = \mu_G(K^g)$.
\end{proof}
\subsection{Duality theorem}
Fix measures $\mu_G,\mu_H$ and write $\mu_{H\backslash G}$ for the corresponding semi-invariant measure on $H\backslash G$.
\begin{proposition}
    Let $W$ be a $H$-representation.
    Given $\phi\in \cInd_H^GW,\Phi\in\sInd_H^G(\delta_{H\backslash G}\otimes \check W)$ define $f_{\Phi,\phi}:G\to \C$ by
    \begin{equation}
        f_{\Phi,\phi}(g) = \langle \Phi(g),\phi(g) \rangle.
    \end{equation}
    Then $f_{\Phi,\phi}$ lies in $C_c^\infty(H\backslash G,\delta_{H\backslash G})$.
\end{proposition}
\begin{proof}
    We clearly have
    \begin{equation}
        f_{\Phi,\phi}(hg) = \delta_{H\backslash G}(h)f_{\Phi,\phi}(g), h\in H, g\in G.
    \end{equation}
    We also have $gf_{\Phi,\phi} = f_{g\phi,g\Phi}$.
    Thus, if $K$ is a compact open subgroup that fixes both $\phi$ and $\Phi$ then $K$ also fixes $f_{\Phi,\phi}$.
    Finally it remains to check that $f$ has compact support module $H$.
    But $\supp(f_{\Phi,\phi})\subseteq \supp(\phi) = H\supp(\phi)$.
\end{proof}
\begin{remark}
    Let $F = \sInd_H^G\circ(\delta_{H\backslash G}\otimes -)\circ \vee$ and $G = \cInd_H^G$.
    If $h:V\to W$ is a homomorphism between $H$-representations then for $\phi\in G(V), \Phi\in F(W)$ we have
    \begin{equation}
        f_{F(h)\Phi,\phi}(g) = \langle \Phi(g)\circ h, \phi(g) \rangle = \langle \Phi(g), h\circ\phi(g) \rangle = f_{\Phi,G(h)\phi}(g).
    \end{equation}
\end{remark}
\begin{definition}
    Define the pairing
    \begin{equation} 
        (-,-)_W:\sInd_H^G(\delta_{H\backslash G}\otimes \check W)\times \cInd_H^GW\to \C
    \end{equation}
    by
    \begin{equation}
        (\Phi,\phi)_W \mapsto \int_{H\backslash G} f_{\Phi,\phi}d\mu_{H\backslash G}.
    \end{equation}
    This pairing is clearly $G$-invariant.
    By the remark the induced map 
    \begin{equation}
        \sInd_H^G(\delta_{H\backslash G}\otimes \check W)\to (\cInd_H^GW)^\vee
    \end{equation}
    is natural in $W$.
\end{definition}
\begin{lemma}
    Let $K$ be a compact open subset of $G$, $\mathcal G$ a set of representatives for $H\backslash G/K$, and for each $g\in \mathcal G$, let $\mathcal W_g$ be a basis for $W^{H\cap gKg^{-1}}$.
    Then for each $g\in \mathcal G, w\in \mathcal W_g$ there is a unique $f_{g,w}$ with support $HgK$ and $f_{g,w}(g) = w$, and the collection of all of these form a basis for $(\cInd_H^GW)^K$.
\end{lemma}
\begin{proof}
    It is clear that the $f_{g,w}$ exist and that they are linearly independent.
    To see that they span $(\cInd_H^GW)^K$, note that if $f\in (\cInd_H^GW)^K$ then $\supp(f)$ is the union of finitely many double cosets of $H\backslash G/K$.
    Noting that $f$ multiplies by the indicators on the various double cosets are still in $(\cInd_H^GW)^K$, we may thus reduce to the case when $\supp(f) = HgK$ for some $g\in \mathcal G$.
    But note that $f(g) \in W^{H\cap gKg^{-1}}$.
    Taking the appropriate linear combination of $f_{g,w}$'s gives the result.
\end{proof}
\begin{remark}
    We have that 
    \begin{equation}
        (\delta_{H\backslash G}\otimes \check W)^{H\cap gKg^{-1}} = \check W^{H\cap gKg^{-1}} = \left(W^{H\cap gKg^{-1}}\right)^*
    \end{equation}
    since $\delta_{H\backslash G}$ is trivial on $H\cap gKg^{-1}$.
    It follows that the dual basis of $\mathcal W_g$ give a basis for $(\delta_{H\backslash G}\otimes \check W)^{H\cap gKg^{-1}}$.
    Write $f_{g,\check w}, g\in \mathcal G, w\in \mathcal W_g^*$ for the elements of $\sInd_H^G(\delta_{H\backslash G}\otimes W)$ that arise in the same way as in the lemma.
    Then by a similar argument as above, $\sInd_H^G(\delta_{H\backslash G}\otimes W)$ consists of all functions $f$ such that $f|_{HgK}$ is a finite linear combination of $f_{g,\check w}$'s.

    Note moreover that for $g\in \mathcal G, w\in \mathcal W_g,\check w\in \mathcal W_g^*$,
    \begin{equation}
        (f_{g,\check w},f_{g,w}) = \int_{H\backslash G}1_{HgK}\langle\check w,w\rangle d\mu_{H\backslash G} = \mu_{H\backslash G}(HgK)\langle \check w, w \rangle
    \end{equation}
    and 
    \begin{equation}
        (f_{g,\check w},f_{g',w}) = 0
    \end{equation}
    when $g'\in\mathcal G$ and $g\ne g'$.
\end{remark}
\begin{proposition}
    The pairing $(-,-)$ is perfect.
\end{proposition}
\begin{proof}
    It suffices to show that the induced map 
    \begin{equation}
        \sInd_H^G(\delta_{H\backslash G}\otimes \check W)^K\to ((\cInd_H^GW)^K)^*
    \end{equation}
    is an isomorphism for any compact open subgroup $K$ of $G$.
    But this just follows from the remark.
\end{proof}
\begin{corollary}
    There is a natural isomorphism
    \begin{equation}
        (\cInd_H^GW)^\vee \cong \sInd_H^G(\delta_{H\backslash G}\otimes \check W).
    \end{equation}
\end{corollary}
\section{The Hecke Algebra}
\begin{definition}
    Let $f_1,f_2\in C_c^\infty(G)$ and define
    \begin{equation}
        f_1*f_2(g) = \int_Gf_1(x)f_2(x^{-1}g)d\mu_G(x).
    \end{equation}
\end{definition}
\begin{lemma}
    Let $f_1,f_2\in C_c^\infty(G)$.
    Then the map $(x,g) \mapsto f_1(x)f_2(x^{-1}g)$ is in $C_c^\infty(G\times G)$.
\end{lemma}
\begin{proof}
    Let $K$ be a compact open subgroup such that $\rho(K)$ fixes $f_1,f_2$ and $\lambda(K)$ fixes $f_2$.
    Then for $k_1,k_2\in K$, $(xk_1,gk_2)\mapsto f_1(x)f_2(x^{-1}g)$ and so it is fixed by $K\times K$.
    It remains to check that it has compact support.
    But its support is
    \begin{equation}
        \set{(x,g): x\in \supp(f_1),g\in x\cdot \supp(f_2)}.
    \end{equation}
    This is the image of $\supp(f_1)\times \supp(f_2)$ under the homeomorphism $G\times G\to G\times G: (x,y)\mapsto (x,xy)$ and so is compact.
\end{proof}
\begin{proposition}
    If $f_1,f_2\in C_c^\infty(G)$ then $f_1*f_2\in C_c^\infty(G)$.
\end{proposition}
\begin{proof}
    Note that for a fixed $g\in G$ the map $x\mapsto f_1(x)f_2(x^{-1}g)$ is in $C_c^\infty(G)$ and so $f_1*f_2$ is defined everywhere.
    Let $K$ be a compact open subgroup of $G$ such that $\rho(K)$ fixes $f_2.$
    Then it is clear that $\rho(K)$ also fixes $f_1*f_2$.
    To see that the support is compact note that $f_1*f_2(g) \ne 0$ only if $\supp(f_1)\cap g^{-1}\supp(f_2) \ne \emptyset$.
    But $\supp(f_1)$ is compact and $\supp(f_2)$ is open and so only finitely many cosets of $\supp(f_2)$ can intersect $\supp(f_1)$.
    Thus $\supp(f_1*f_2)$ is contained a finite union of cosets of $\supp(f_2)$ and so is compact.
\end{proof}
\begin{remark}
    It is easy to check that $*$ is associative.
\end{remark}
\begin{definition}
    The Hecke algebra of $G$ is $\mathcal H(G) = (C_c^\infty(G),*)$.
    This is an associative algebra.

    For a compact open subgroup $K$ of $G$ define $e_K := 1_K/\mu_G(K)$.
\end{definition}
\begin{remark}
    $e_K$ is idempotent.
\end{remark}
\begin{remark}
    For any $f\in C_c^\infty(G), k\in K, g\in G$ we have $e_K*f(kg) = e_K*f(g)$.
    In other words, $e_K*f$ is fixed by $\lambda(K)$.
    Similarly $f*e_K$ is fixed by $\rho(K)$.
\end{remark}
\begin{proposition}
    Let $K$ be a compact open subgroup of $G$ and $f\in C_c^\infty(G)$.
    Then $f$ is fixed by $\lambda(K)$ iff $e_K*f = f$.
\end{proposition}
\begin{proof}
    It is clear that if $f$ is fixed by $\lambda(K)$ then $e_K*f(g) = f(g)$ for all $g\in G$.
    Conversely, suppose $e_K*f = f$.
    Then the result follows from the remark.
\end{proof}
\begin{remark}
    Similarly $f$ is fixed by $\rho(K)$ iff $f*e_K = f$.
\end{remark}
\begin{corollary}
    The space $\mathcal H(G,K) := e_K*\mathcal H(G)*e_K$ is a subalgebra of $\mathcal H(G)$, with unit $e_K$.
\end{corollary}
\begin{corollary}
    \begin{equation}
        \mathcal H(G,K) = \set{f\in \mathcal H(G): f(k_1gk_2) = f(g), g\in G,k_1,k_2\in K}.
    \end{equation}
\end{corollary}
\begin{definition}
    Let $M$ be a left $\mathcal H(G)$-module.
    We say that $M$ is smooth if $\mathcal H(G)*M = M$.
    Since $\mathcal H(G)$ is a union of the $\mathcal H(G,K)$ this is equivalent to saying for every $m\in M$ there is a compact open subgroup $K$ such that $e_K*m = m$.

    Write $\mathcal H(G)-\sMod$ for the category of smooth $\mathcal H(G)$-modules.
\end{definition}
\begin{definition}
    Let $(\pi,V)$ be a smooth $G$ representaion.
    We can turn $V$ into a smooth $\mathcal H(G)$-module by defining for $f\in \mathcal H(G), v\in V$
    \begin{equation}
        \pi(f)v = \int_Gf(g)\pi(g)vd\mu_G(g).
    \end{equation}
\end{definition}
\begin{remark}
    Let $K$ be a compact open subgroup of $G$ such that $\rho(K)$ fixes $f$ and $K$ fixes $v$.
    Then map $g\mapsto f(g)\pi(g)v$ is fixed by $\rho(K)$ and has compact support.
    Thus the integral is defined and is equal to the finite sum
    \begin{equation}
        \sum_{g\in G/K}f(g)\pi(g)v.
    \end{equation}
    It is then clear that $\pi(e_K)v = v$ for $v\in V^K$.
\end{remark}
\begin{remark}
    If $V = (C_c^\infty(G),\lambda)$ then the $\mathcal H(G)$-module action is given by $\lambda(\phi)f = \phi*f$.

    If $V = (C_c^\infty(G),\rho)$ then the $\mathcal H(G)$-module action is given by $\rho(\phi)f = f*\check\phi$.
\end{remark}
\begin{proposition}
    The above procedure defines a functor $\Smo_G\to \mathcal H(G)-\sMod$ which is the identity on morphisms.
\end{proposition}
\begin{proof}
    It is easy to check that if $f_1,f_2\in C_c^\infty(G),v\in V$ then $\pi(f_1)(\pi(f_2)v) = \pi(f_1*f_2)v$.
    Thus $V$ is a $\mathcal H(G)$-module.
    By the remark, $V$ is moreover a smooth $\mathcal H(G)$-module.
    It is clear that $G$-homomorphisms are also $\mathcal H(G)$-homomorphisms.
\end{proof}
\begin{lemma}
    Let $M$ be a smooth $\mathcal H(G)$-module.
    Then $\mathcal H(G) \otimes_{\mathcal H(G)}M \cong M$.
\end{lemma}
\begin{proof}
    Let $\theta:\mathcal H(G)\otimes_{\mathcal H(G)} M \to M$ be the canonical map.
    Suppose $\sum_if_i\otimes m_i$ is in the kernel.
    Let $K$ be a compact open subgroup that fixes each of the $f_i$ by translation on both sides and is such that $m_i\in e_K*M$ for all $i$.
    Then $e_K*m_i = m_i$ for all $i$ and so 
    \begin{equation}
        \sum_if_i\otimes m_i = e_K\otimes\sum_if_i*m_i = 0.
    \end{equation}
    Thus the map is injective.
    But it is surjective by definition of smoothness.
    Hence we have an isomorphism.
\end{proof}
\begin{corollary}
    Let $M$ be a smooth $\mathcal H(G)$-module.
    Then $M$ is naturally a $G$-representation.
\end{corollary}
\begin{proof}
    $G$ acts on $\mathcal H(G)$ by left translation, and hence on $\mathcal H(G)\otimes_{\mathcal H(G)}M$.
\end{proof}
\begin{remark}
    If $m\in M$ and $K$ is a compact open subgroup of $G$ such that $e_K*m = m$, then for $g\in G$, $gm = 1_{gK}*m/\mu_G(K)$.
    But then for the induced $\mathcal H(G)$-module strucutre we have
    \begin{equation}
        \pi(1_{gK})m = \int_G1_{gK}(x)1_{xK}*md\mu_G(x)/\mu_G(K) = 1_{gK}*m.
    \end{equation}
    This suffices to show that the induces module strucutre is just the original module structure.
\end{remark}
\begin{corollary}
    The above procedure defines a functor $\mathcal H(G)-\sMod \to \Smo_G$ which is the identity on morphisms.
\end{corollary}
\begin{remark}
    Conversely if we start with a smooth $G$-representation $V$, then for $v\in V^K$ we have $gv = 1_{gK}*v/\mu_G(K) = \int_G1_{gK}(x)\pi(x)vd\mu_G(x)/\mu_G(K) = \pi(g)v$.
    We thus have the following result.
\end{remark}
\begin{thm}
    The functors $\Smo_G\to \mathcal H(G)-\sMod$ and $\mathcal H(G)-\sMod\to \Smo_G$ are mutually inverse.
\end{thm}
\begin{proposition}
    Let $V$ be a smooth $G$-representation. 
    Then the operator $e_K*$ is the projection onto $V^K$ along $V(K)$.
    The space $V^K$ is an $\mathcal H(G,K)$-module on which $e_K$ acts as the identity.
\end{proposition}
\begin{proof}
    Let $k\in K$ and $v\in V$. 
    Then
    \begin{equation}
        k(e_K*v) = e_K*(kv) = e_K*v
    \end{equation}
    where the last equality follows from $\delta_G$ being trivial on $K$.
    Thus $e_K$ is a $K$-homomorphism with image in $V^K$.
    It follows that it must send $V(K)$ to $0$.
    Moreover it is idempotent and the identity on $V^K$.
    This gives the result.
\end{proof}
\begin{lemma}
    Let $V$ be an irreducible smooth $G$-representation.
    Then $V^K$ is either $0$ or a simple $\mathcal H(G,K)$-module.
\end{lemma}
\begin{proof}
    Suppose $V^K\ne 0$. Then let $M$ be a non-zero $\mathcal H(G,K)$-submodule of $V$.
    Then $\mathcal H(G)M = V$ by irreducibility and so 
    \begin{equation}
        V^K = e_K*V = e_K*\mathcal H(G) M = \mathcal H(G,K) M = M.
    \end{equation}
\end{proof}
\begin{proposition}
    \label{prop:bij}
    The map $V\mapsto V^K$ induces a bijection between
    \begin{enumerate}
        \item equivalence classes of smooth representations of $G$ such that $V^K\ne 0$
        \item equivalance classes of simple $\mathcal H(G,K)$-modules.
    \end{enumerate}
\end{proposition}
\begin{proof}
    Let $M$ be a simple $\mathcal H(G,K)$-module and let $U = \mathcal H(G)\otimes_{\mathcal H(G,K)}M$.
    Then $U^K = e_K*\mathcal H(G)\otimes_{\mathcal H(G,K)}M = e_K\otimes M \cong M$.
    Let $X$ be a maximal $G$-subspace of $U$ such that $X^K=0$ (exists by Zorn).
    This subspace is unique since $(X+X')^K = X^K+X'^K$.
    Note that $X$ is maximal such that $X\cap U^K  = X\cap e_K\otimes M = 0$.
    If $X\subsetneq W$ is a $G$-subspace of $U$ then $W$ must meet $e_K\otimes M$ and so must contain $e_K\otimes M$ (as $M$ is simple) and so must equal to $U$.
    It follows that $V = U/X$ is irreducible and $V^K = M$ as $\mathcal H(G,K)$-modules.
    Note that the isomorphism class of $V$ depends only on that of $M$.

    Thus we now have maps going in both directions and we know that one composition is the identity.
    To see that the other composition is the identity, let $V$ be an irreducible $G$-representation and $M = V^K$.
    We have a map $U = \mathcal H(G)\otimes_{\mathcal H(G,K)}M \to V$, $f\otimes m \mapsto f*m$.
    The image is non-zero sub-representation of $V$ and so the map must be surjective.
    Moreover, the image of $X$ is a submodule that does not intersect $V^K$ and so must be zero.
    Thus $X$ lies in the kernel of the map.
    Now suppose $u$ lie in the both $U^K$ and the kernel of the map.
    Then $u = e_K\otimes m$ some $m\in M$.
    But then $e_K*m = 0$ and $e_K*m = m$ and so $e_K\otimes m = 0$.
    Thus the kernel lies inside $X$.
    It follows that $V\cong U/X$ as required.
\end{proof}
\begin{corollary}
    Let $V$ be a smooth non-zero representation of $G$.
    Then $V$ is irreducible iff for any open compact open subgroup $K$ of $G$, the space $V^K$ is either zero or $\mathcal H(G,K)$-simple.
\end{corollary}
\begin{proof}
    $(\Rightarrow)$ Done.
    $(\Leftarrow)$ Let $V$ a $G$-representation with a non-zero sub-representation $U$.
    Let $W = V/U$ and $K$ be a compact open subgroup of $G$ such that $U^K, W^K \ne 0$.
    Then $0\to U^K\to V^K\to W^K\to 0$ is exact and so $V^K$ is not a simple $\mathcal H(G,K)$-module.
\end{proof}
\begin{definition}
    Let $(\rho,V) \in \hat K$ and define
    \begin{equation}
        e_V(x) = \frac{\dim V}{\mu_G(K)}\tr(\rho(x^{-1})) 1_K(x).
    \end{equation}
    Recall that since $K$ is compact, the kernel of $\rho$ is also a compact open subgroup $K'\le K$ such that $K/K'$ is finite.
    It follows that $\rho$ is constant on double cosets $K'\backslash G/K'$ and so $e_{K'}*e_{\rho} = e_\rho*e_{K'} = e_\rho$.
    Thus $e_\rho\in \mathcal H(K,K')\subseteq \mathcal H(G,K')$.
\end{definition}
\begin{proposition}
    The map $\mathcal H(K,K')\to \C[K/K']$, $1_{gK'}/\mu_G(K')\mapsto gK'$ is an algebra isomorphism that respects their respective actions on $V$.
\end{proposition}
\begin{remark}
    Under this isomorphism $e_V$ gets sent to the idempotent for $V$ is $\C[K/K']$.
\end{remark}
\begin{corollary}
    \begin{enumerate}
        \item The function $e_V\in \mathcal H(G)$ is idempotent.
        \item If $W$ is a smooth $G$-representation of $G$, then $e_\rho$ is the $K$-projection $V\to V^\rho$.
    \end{enumerate}
\end{corollary}
\begin{remark}
    Replacing $V^K$ with $V^\rho$ and $\mathcal H(G,K)$ with $e_\rho*\mathcal H(G)*e_\rho$ we get an exact analogue of proposition \ref{prop:bij}.
\end{remark}
\begin{proposition}
    For $i=1,2$, let $G_i$ be a locally profinite group, $K_i$ a compact open subgroup of $G_i$ and $\rho_i\in \hat K_i$.
    Let $V$ be a vector space which is also both a $G_1$ and $G_2$ representation (denoted $\pi_1$ and $\pi_2$ respectively) such that their actions commute.
    Then $V$ is natrually a $G_1\times G_2$ representation, denoted $\pi_1\times\pi_2$, and 
    \begin{equation}
        \pi_1(e_{\rho_1})*(\pi_2(e_{\rho_2})*V) = \pi_1\times\pi_2(e_{\rho_1\otimes\rho_2})*V = V^{\rho_1\otimes\rho_2}.
    \end{equation}
\end{proposition}
\section{Intertwining}
\begin{definition}
    Let $K_1,K_2$ be compact open (or just closed) subgroups of $G$ and let $(\rho_i,U_i)\in \hat K_i$ for $i=1,2$.
    The element $g\in G$ intertwines $U_1$ with $U_2$ if 
    \begin{equation}
        \Hom_{K_1^g\cap K_2}(U_1^g,U_2) \ne 0,
    \end{equation}
    where $U_i^g$ denotes the representation $x\mapsto \rho_1(gxg^{-1})$ of the group $K_1^g = g^{-1}K_1g$.
    As a property of $g$, this depends only on the double coset $K_1gK_2$.
\end{definition}
\begin{proposition}
    \label{prop:intertwine}
    For $i=1,2$, let $K_i$ be a compact open subgroup of $G$ and let $(\rho_i,U_i)\in \hat K_i$.
    Let $(\pi,V)$ be an irreducible smooth representation of $G$ which contains both $U_1$ and $U_2$.
    Then there exists a $g\in G$ that intertwines $U_1$ with $U_2$.
\end{proposition}
\begin{proof}
    Let $e_2$ denote the $K_2$ projection $V\to V^{\rho_2}$.
    Since $g^{-1}V^{\rho_1} = V^{\rho_1^g}$ and $\sum_{g\in G}g^{-1}V^{\rho_1} = V$ there is a $g\in G$ such that $g^{-1}V^{\rho_1}\to V^{\rho_2}$ is non-zero.
    It is then easy to see that this $g$ intertwines $U_1$ with $U_2$.
\end{proof}
\begin{remark}
    Let $K_1,K_2,U_1,U_2$ be as in the proposition.
    Since $V$ is semisimple as a $K_1^g\cap K_2$-representation 
    \begin{align}
        \dim_\C\Hom_{K_1^g\cap K_2}(U_1^g,U_2) &= \dim_\C\Hom_{K_1^g\cap K_2}(U_2,U_1^g) \nonumber \\
                                               &= \dim_\C\Hom_{K_1\cap K_2^{g^{-1}}}(U_2^{g^{-1}},U_1).
    \end{align}
    It follows that $g$ intertwines $U_1$ with $U_2$ iff $g^{-1}$ intertwines $U_2$ with $U_1$.
\end{remark}
\begin{definition}
    We say that $U_1$ and $U_2$ intertwine in $G$ is there is a $g\in G$ that intertwines $U_1$ with $U_2$.

    If we have a since pair $(K,\rho)$ we say $g$ intertwines $\rho$ if it intertwines $\rho$ with itself.
\end{definition}
\begin{proposition}
    Let $K$ be a compact open subgroup of $G$, $g\in G$, and $\rho\in \hat K$.
    The following are equivalent
    \begin{enumerate}
        \item there exists a $f\in e_\rho*\mathcal H(G)*e_\rho$ such that $f|_{KgK} \ne 0$,
        \item $g$ intertwines $\rho$.
    \end{enumerate}
\end{proposition}
\begin{proof}
    Let $C^\infty(KgK)$ be the space of $G$-smooth functions on the coset $KgK$.
    $C^\infty(KgK)$ is naturally a smooth $K\times K$-representation, which we call $\pi$, via $(k_1,k_2)f:x\mapsto f(k_1^{-1}xk_2)$.
    Let $H = \set{(k,g^{-1}kg):k\in K\cap gKg^{-1}}\subseteq K\times K$.
    Then the map $C^\infty(KgK)\to \C$, $f\mapsto f(g)$ is a $H$-homomorphism ($H$ acts trivially on $\C$).
    We thus obatin a map $C^\infty(KgK) \to \sInd_H^{K\times K}\C =: V$.
    Now, given an $\phi\in V$ define $f_\phi\in C^\infty(KgK)$ by $f_\phi(k_1gk_2) = \phi(k_1^{-1},k_2)$ for $k_1,k_2\in K$.
    This is well-defined since $\phi\in V$ and is also $G$-smooth.
    It is clear that these maps are inverse $K\times K$-homomorphisms and so $V\cong C^\infty(KgK)$ as $K\times K$-representations.
    Now, 
    \begin{align}
        e_\rho*C^\infty(KgK)*e_\rho &= \lambda(e_\rho)*(\rho(e_{\check\rho})*C^\infty(KgK)) \nonumber \\
                                    &= \pi(e_{\rho\otimes\check\rho})*C^\infty(KgK) \cong V^{\rho\otimes\check\rho},
    \end{align}
    as $e_{\rho\otimes\check\rho}$ naturally lives in $\mathcal H(K\times K)$.
    Thus $(1)$ holds iff $V^{\rho\otimes\check\rho}\ne 0$ iff $\Hom_{K\times K}(\rho\otimes\check\rho,V)\ne 0$ iff $\Hom_H(\rho\otimes\check\rho,\C) \ne 0$.
    Since $H$ is compact, this is equivalent to $\rho\otimes\check\rho$ having a fixed vector which in turn is equivalent to the representation $k\mapsto \rho(k)\otimes\check\rho(g^{-1}kg)$ of $K\cap gKg^{-1}$ having a fixed vector.
    This is equivalent to $\Hom_{K\cap gKg^{-1}}(\rho^g,\rho) \ne 0$ as required.
\end{proof}
\begin{definition}
    Let $K$ be an open subgroup of $G$, containing and compact module $Z$.
    Let $(\rho,W)$ be be an irreducible smooth representation of $K$.
    Write $\mathcal H(G,\rho)$ for the space of functions $f:G\to \End_\C(W)$ which are are compactly supported modulo $Z$ and satisfy
    \begin{equation}
        f(k_1gk_2) = k_1f(g)k_2,\quad k_i\in K,g\in G.
    \end{equation}
    Note that any $f\in \mathcal H(G,\rho)$ has support a finite union of double cosets $K\backslash G/K$.

    Let $\dot\mu$ be a Haar measure on $G/Z$.
    For $\phi_1,\phi_2\in \mathcal H(G,\rho)$, we set
    \begin{equation}
        \phi_1*\phi_2(g) = \int_{G\backslash Z}\phi_1(x)\phi_2(x^{-1}g)d\dot\mu(x), g\in G.
    \end{equation}
    The function $\phi_1*\phi_2$ lies in $\mathcal H(G,\rho)$, an under this operation $\mathcal H(G,\rho)$ is an associative $\C$-algebra with unit (given by $x\mapsto 1_K(x)x/\dot\mu(K/Z)$).
\end{definition}
\begin{remark}
    We have $e_\rho*\mathcal H(G)*e_\rho \otimes \End_\C(W)\cong \mathcal H(G,\rho)$.
\end{remark}
\begin{proposition}
    Let $g\in G$.
    There exists $\phi \in \mathcal H(G,\rho)$ with support $KgK$ iff $g$ intertwines $\rho$.
\end{proposition}
\begin{proof}
    Let $f\in \End_\C(W)$.
    For $g\in G$, the assignment $k_1gk_2\mapsto k_1fk_2$, is well-defined and given an element of $\mathcal H(G,\rho)$ iff for $k\in K^g\cap K$ we have $f\circ \rho(k) = \rho^g(k)\circ f$.
    This is the case iff $f\in \Hom_{K\cap K^g}(\rho,\rho^g)$.
    But $\rho$ and $\rho^g$ are semisimple as $K\cap K^g$-representations and so 
    \begin{equation}
        \dim_\C\Hom_{K\cap K^g}(\rho,\rho^g) = \dim_\C\Hom_{K\cap K^g}(\rho^g,\rho)
    \end{equation}
    and so the lemma follows.
\end{proof}
\begin{corollary}
    The space of functions $f\in \mathcal H(G,\rho)$ supported on $KgK$ is isomorphic to $\Hom_{K\cap K^g}(\rho^g,\rho)$.
\end{corollary}
\begin{remark}
    $\cInd_K^GW$ consists of functions $G\to W$ compactly supported modulo $Z$ and satisfying $f(kg) = kf(g)$ for $k\in K,g\in G$.
\end{remark}
\begin{definition}
    Let $\phi\in \mathcal H(G,\rho)$ and $f\in \cInd_K^GW$.
    Define
    \begin{equation}
        \phi*f(g) = \int_{G/Z}\phi(x)f(x^{-1}g)d\dot\mu(x),\quad g\in G.
    \end{equation}
    This is clearly in $\cInd_K^GW$.
    It easy to check that this moreover defines an action on $\cInd_K^GW$ and so we obtain a group homomorphism $\mathcal H(G,\rho)\to \End_G(\cInd_K^GW)$.
\end{definition}
\begin{proposition}
    This homomorphism is an isomorphism.
\end{proposition}
\begin{proof}
    By Frobenius reciprocity we get a map 
    \begin{equation}
        \mathcal H(G,\rho) \to \Hom_K(W,\cInd_K^GW).
    \end{equation}
    Now suppose we are given $\phi:W\to \cInd_K^GW$ a $K$-homomorphism.
    Define $\Phi:G\to \End_\C(W)$ by
    \begin{equation}
        \Phi(g)(w) = \phi(w)(g).
    \end{equation}
    Then $\Phi(k_1gk_2)(w) = \phi(w)(k_1gk_2) = k_1\phi(w)(gk_2)= k_1\phi(k_2w)(g)$.
    $\Phi$ is compactly supported since $W$ is finite dimensional, and so $\Phi\in \mathcal H(G,\rho)$.
    It is then easy to check that $\phi\mapsto \Phi/\dot\mu(K/Z)$ is the required inverse map.
\end{proof}
\begin{lemma}
    \label{lem:cind_irr}
    Let $K$ be a open subgroup of $G$ containing and compact modulo $Z$, and let $W$ be an irreducible smooth representation of $K$.
    Suppose $g\in G$ intertwines $W$ iff $g\in K$.
    Then $\cInd_K^GW$ is irreducible.
\end{lemma}
\begin{proof}
    Let $X = \cInd_K^GW$.
    The center $Z$ acts via the cental character $w_\rho$ and so $X$ is a direct sum of $K$-isotypic components.
    Any $K$-homomorphism $W\to X$ has image in $X^\rho$.
    Thus
    \begin{equation}
        \Hom_K(W,X^\rho) = \Hom_K(W,X) \cong \End_G(X) \cong \mathcal H(G,\rho).
    \end{equation}
    But $\mathcal H(G,\rho)$ must be $1$-dimensional and so $W = X^\rho$.
    Now let $Y$ be a non-zero $G$-subspace of $X$.
    Then
    \begin{equation}
        0 \ne \Hom_G(Y,X) \subseteq \Hom_G(Y,\sInd_H^GW) \cong \Hom_K(Y,W).
    \end{equation}
    Since $Y$ is semisimple over $K$ (since $X$ is), we have $Y^\rho \ne 0$ and so $W = X^\rho = Y^\rho \subseteq Y$ since $W$ is an irreducible $K$-representation.
    As $W$ generates $X$ over $G$ we have that $Y = X$ and so $X$ is irreducible.
\end{proof}
\chapter{Irreducible representations of GL(2,F)}
\section{GL(n,F)}
\begin{remark}
    We have the following locally profinite groups.
    \begin{enumerate}
        \item $(F,+)$ is a locally profinite group with $\mf p^n,n\in\Z$ a fundamental system of compact open neighbourhoods of $0$.
        \item $(F,\cdot)$ is a locally profinite group with $1+\mf p^n,n\ge 1$ a fundamental system of compact open neighbourhoods of $1$.
        \item $(M_n(F),+)$ is a locally profinite group with multiplication of matrices continuous.
        \item $(\GL_n(F),\cdot)$ is a locally profinite group with $K = \GL_n(\mf o)$ and $K_j = 1 + \mf p^j M_n(\mf o)$ compact open and give a fundamental system of neighbourhoods of $1$ in $G$.
    \end{enumerate}
\end{remark}
\begin{proposition}
    Let $V = F^{\oplus n}$.
    Then $V$ is a smooth $G$-representation.
\end{proposition}
\begin{proof}
    Let $e_1,e_2,\dots,e_n$ be the standard basis vectors.
    Then $e_1$ is fixed by the compact open subgroup 
    \begin{equation}
        \begin{pmatrix}
            1 & \mf o  & \dots & \mf o \\
            0 & 1 & \dots & \mf o \\
            0 & \vdots & \ddots & \mf 0 \\
            0 & 0 & \dots & 1
        \end{pmatrix}.
    \end{equation}
    Similarly for $e_2,\dots,e_n$.
    The result follows.
\end{proof}
\begin{definition}
    Let $V$ be a $n$-dimensional vector space.
    An $\mf o$-lattice in $V$ is a finitely generated $\mf o$-submodule $L$ of $V$ such that $V = FL$.
\end{definition}
\begin{proposition}
    Let $L$ be an $\mf o$-lattice of $V$.
    Then there is an $F$-basis $\set{x_1,\dots,x_n}$ of $V$ such that $L = \sum_{i=1}^n\mf o x_i$.
\end{proposition}
\begin{corollary}
    $\mf o$-lattices are compact open subgroups of $V$.
\end{corollary}
\begin{corollary}
    \label{cor:lat_syt}
    $\mf o$-lattices form a fundamental system of compact open subgroups of the origin.
\end{corollary}
\begin{proof}
    Open sets are locally a product of open sets of $F$.
\end{proof}
\begin{definition}
    A lattice of $V$ is a compact open subgroup of $V$.
\end{definition}
\begin{proposition}
    Let $L$ be a subgroup of $V$.
    Then $L$ is a lattice iff there are $\mf o$-lattices $L_1,L_2$ in $V$ such that $L_1\subseteq L\subseteq L_2$.
\end{proposition}
\begin{proof}
    $(\Leftarrow)$ $L_1\subseteq L$ implies that $L$ is open and hence closed.
    $L\subseteq L_2$ then implies that $L$ is compact.

    $(\Rightarrow)$ The existence of $L_1$ follows from corollary \ref{cor:lat_syt}.
    It follows that $FL = V$.
    Now choose a basis $x_1,\dots,x_n$ of $V$ and consider the projection maps $\pi_i:V\to Fx_i$.
    Then $\pi_i(L)$ is a compact open subgroup of $F$ and so is contained in some $\mf p^{n_i}x_i$.
    Thus $L\subseteq \oplus_i\mf p^{n_i}$.
\end{proof}
\section{Structure theory}
\begin{proposition}
    Let $K = \GL_2(\mf o)$.
    Then $G = BK$.
\end{proposition}
\begin{corollary}
    $B\backslash G$ is compact.
\end{corollary}
\begin{proposition}
    Let $\bar \omega$ be a prime element of $F$.
    Then 
    \begin{equation}
    \left\{\begin{pmatrix} \bar \omega^a & 0 \\ 0 & \omega^b\end{pmatrix} : a\le b\in \Z\right\}
    \end{equation}
    is a set of representatives for $K\backslash G / K$.
\end{proposition}
\begin{corollary}
    $G/K$ is countable.
\end{corollary}
\begin{proposition}
    If $K'$ is a compact open subgroup of $G$, then there is a $g\in G$ such that $gK'g^{-1}\subseteq K$.
\end{proposition}
\begin{proof}
    Let $e_1,e_2$ be a basis vectors for $V$.
    Since $V$ is a smooth, $K_i = \stab_K(e_i)$ is a compact open subgroup of $K$.
    It follows that $Ke_i$ is a finite set.
    Let $S = Ke_1 \cup Ke_2$ and $L = \spanv_{\mf o}S$.
    Then $L$ is a $K$-stable $\mf o$-lattice.
    The result follows.
\end{proof}
\begin{definition}
    The standard Iwahori sbugroup of $G$ is the compact open subgroup 
    \begin{equation}
     I = \left\{\begin{pmatrix} a & b \\ c & d \end{pmatrix} : a,d\in U_F,b\in \mf o,c\in \mf p\right\}.
    \end{equation}
\end{definition}
\begin{proposition}
    (Iwahori decomposition).
    The product map
    \begin{equation}
        I\cap N'\times I\cap T\times I\cap N \to I
    \end{equation}
    is a homeomorphism for any ordering of the left hand side.
\end{proposition}

\section{Haar measures}
\begin{lemma}
    $C_c^\infty(F)$ is spanned by the characteristic functions of sets $a+\mf p^m$ for $a\in F,m\in \Z$.
\end{lemma}
\begin{corollary}
    Let $\Phi\in C_c^\infty(F), y\in F^\times$.
    Then
    \begin{equation}
        \int_F\Phi(xy)d\mu(x) = \abs{y}^{-1}\int_F\Phi(x)d\mu(x).
    \end{equation}
\end{corollary}
\begin{corollary}
    The functional $\Phi\mapsto \int_{F^\times}\Phi(x)\abs{x}^{-1}d\mu(x)$ for $\Phi\in C_c^\infty(F^\times)$ is a Haar-measure on $F^\times$.
\end{corollary}
\begin{lemma}
    The map $x\mapsto \abs{\det x}$ for $x\in G$ is in $C_c^\infty(G)$.
\end{lemma}
\begin{proposition}
    The functional $\Phi\mapsto \int_{G}\Phi(x)\abs{\det x}^{-2}d\mu(x)$ for $\Phi\in C_c^\infty(G)$ is a left and right Haar integral on $G$.
    In particular, $G$ is unimodular.
\end{proposition}
\begin{definition}
    We have that $B = T\ltimes N$ and so $C_c^\infty(B) \cong C_c^\infty(T)\otimes_\C C_c^\infty(N)$.
    Define the linear functional 
    \begin{equation}
        \Phi \mapsto \int_T\int_N\Phi(tn)d\mu_T(t)d\mu_N(n),\Phi\in C_c^\infty(B).
    \end{equation}
    It is a straighforward check that this is a left Haar measure on $B$.
\end{definition}
\begin{lemma}
    Let $\Phi\in C_c^\infty(N)$ and
    \begin{equation}
    t = \begin{pmatrix} a & 0 \\ 0 & b \end{pmatrix} \in T.
    \end{equation}
    Then 
    \begin{equation}
        \int_N \Phi(tnt^{-1})d\mu_N(n) = \abs{a/b}^{-1}\int_N\Phi(n)d\mu_N(n).
    \end{equation}
\end{lemma}
\begin{corollary}
    The module $\delta_B$ of the group $B$ is given by 
    \begin{equation}
        \delta_B:tn\mapsto \abs{t_2/t_1}, \quad n\in N, t = \begin{pmatrix} t_1 & 0 \\ 0 & t_2 \end{pmatrix} \in T.
    \end{equation}
\end{corollary}
\begin{lemma}
    Let $\mu_K$ be a Haar measure on $K$.
    Then $\mu_K$ restricts to a semi-invariant measure on $B\cap K\backslash K$.
\end{lemma}
\begin{proof}
    Since $K$ is compact, $K$ is unimodular and so $\mu_K$ is also right invariant.
    The result follows.
\end{proof}
\begin{corollary}
    The space $C_c^\infty(B\backslash G,\delta_B^{-1})$ admits a positive semi-invariant measure $\dot\mu$.
    Moreover, $K$ admits a Haar measure such that
    \begin{equation}
        \int_{B\backslash G} f(g)d\dot\mu(g) = \int_Kf(k)d\mu_K(k).
    \end{equation}
\end{corollary}
\begin{proof}
    The first part follows from $G$ being unimodular.
    For the second part note that $\delta_G$ is trivial on $K$ and so restriction to $K$ induces a map 
    \begin{equation}
        C_c^\infty(B\backslash G,\delta_B^{-1}) \to C_c^\infty(K\cap B\backslash K,1).
    \end{equation}
    Since $G = BK$, this map is an injection.
    It is surjective by looking at $(-)^{K'}$ of the map for $K'\subseteq K$ a compact open subgroup of $K$.
    Thus it is a bijection.
    Note moreover that if $k\in K$ then $\rho_k$ commutes with the map and so it is an isomorphism of $K$-representations.
    Write $\phi$ for the inverse map.
    Then the functional
    \begin{equation}
        f\mapsto \int_{B\backslash G}\phi(f)d\dot\mu
    \end{equation}
    is a semi-invariant measure on $B\cap K\backslash K$.
    By the previous lemma the result follows.
\end{proof}
\section{Representations of Mirabolic Group}
\begin{definition}
    Let $\vartheta$ a character of $N$.
    Write $V(\vartheta)$ for the space spanned by elements of the form $nv-\theta(n)v$ for $n\in N, v\in V$.
    We set $V_\vartheta = V/V(\vartheta)$.
\end{definition}
\begin{remark}
    Let $N_0$ be a compact open subgroup of $N$.
    Then the map $V\to V^{N_0}$ given by
    \begin{equation}
        v\mapsto \frac1{\mu_N(N_0)}\int_{N_0}nvd\mu_N(n)
    \end{equation}
    is a projection map onto $V^{N_0}$.
\end{remark}
\begin{lemma}
    Let $\mu_N$ be a Haar measure on $N$ and $\vartheta$ a character of $N$.
    \begin{enumerate}
        \item Let $V$ be a smooth $N$-representation and $v\in V$.
            Then $v\in V(\vartheta)$ iff there is a compact open subgroup $N_0$ of $N$ such that 
            \begin{equation}
                \int_{N_0}\vartheta(n)^{-1}nvd\mu_N(n) = 0.
            \end{equation}
        \item The process $V\mapsto V_\vartheta$ is an exact functor from $\Smo_N$ to the category of complex vector spaces.
    \end{enumerate}
\end{lemma}
\begin{proof}
    Consider first that case when $\vartheta$ is the trivial character on $N$.
    $N \cong F$ is a union of an ascending sequence of compact open subgoups.
    Thus if $v = \sum_iv_i-n_iv_i \in V(N)$ there is a compact $N_0$ containing all the $v_i$.
    The required integral is then $0$ in this case.

    Conversely suppose $v\in V$ and the integral is zero for some $N_0$ a compact open subgroup of $N$.
    Let $N_1$ be a compact normal subgroup of $N_0$ such that $v\in V^{N_1}$.
    $V^{N_1}$ is naturally a $N_0/N_1$-representation.
    Thus $V^{N_1} = V^{N_1}(N_0/N_1)\oplus V^{N_0}$ and the map
    \begin{equation}
        w\mapsto \mu_N(N_0)^{-1}\int_{N_0}nwd\mu_N(n), w\in V^{N_1}
    \end{equation}
    is the $N_0$-projection $V^{N_1}\to V^{N_0}$.
    The kernel is $V^{N_1}(N_0/N_1) \subseteq V(N)$ and so $v\in V(N)$.

    Now suppose $\vartheta$ is arbitrary.
    Then $(\vartheta^{-1}\otimes V)(N) = V(\vartheta)$ and so the result follows from the previous working.

    Part 2. then follows immediately.
\end{proof}
\begin{corollary}
    Let $V$ be a smooth $N$-representation.
    Then $V(N)_N = 0$ and $V(N)(N) = V(N)$.
\end{corollary}
\begin{corollary}
    If $\vartheta\ne 1$ then $V(N)_\vartheta\cong V_\vartheta$.
\end{corollary}
\begin{proposition}
    Ler $V$ be a smooth $N$-representation, and $0\ne v\in V$.
    Then there exists a character $\vartheta$ of $N$ such that $v\not\in V(\vartheta)$.
\end{proposition}
\begin{corollary}
    Let $V$ be a smooth $N$-representation.
    If $V_\vartheta = 0$ for all characters $\vartheta$ of $N$, then $V=0$.
\end{corollary}
\begin{remark}
    Let $V$ be a smooth $M$-representation.
    Then $V(N)$ is a $M$-subrepresentation and $V_N$ is naturally a $S = M/N$-representation.
    But for $s\in S$, $sV(\vartheta) = V(\vartheta')$ where $\vartheta'(n) = \vartheta(s^{-1}ns)$.
    We thus get the following result.
\end{remark}
\begin{corollary}
    Let $V$ be a smooth $N$-representation.
    If $V_\vartheta = 0$ for some character $\vartheta$ of $N$ and $V_N = 0$, then $V=0$.
\end{corollary}
\begin{lemma}
    Let $\vartheta,\vartheta'$ be non-trivial characters of $N$. 
    Then $\sInd_N^M\vartheta \cong \sInd_N^M\vartheta'$ and similarly for $\cInd_N^M$.
\end{lemma}
\begin{proposition}
    Let $\vartheta$ be a non-trivial character on $N$ and set $\mathcal W = \sInd_N^M\vartheta, \mathcal W^c = \cInd_N^M\vartheta$.
    Let $\alpha:\mathcal W\to \C$ denote the canonical map $f\mapsto f(1)$.
    \begin{enumerate}
        \item We have $\mathcal W(N) = \mathcal W^c(N) = \mathcal W^c$ and $(\mathcal W/\mathcal W^c)(N) = 0$.
        \item The map $\alpha$ induces isomorphisms $\mathcal W_\vartheta \cong \C, \mathcal W^c_\vartheta \cong \C$.
    \end{enumerate}
\end{proposition}
\begin{corollary}
    $\cInd_N^M\vartheta$ is irreducible over $M$.
\end{corollary}
\begin{proof}
    Let $V$ be a $M$-subrepresentation of $\mathcal W^c$.
    As $\mathcal W_N^c = 0$, we have $V_N = 0 = (\mathcal W^c/V)_N$.
    Moreover, the sequence
    \begin{equation}
        0\to V_\vartheta \to \mathcal W_\vartheta^c \to (\mathcal W^c/N)_\vartheta \to 0
    \end{equation}
    is exact and $\dim_\C\mathcal W_\vartheta^c = 1$.
    Thus $\dim_\C V_\vartheta$ is $0$ or $1$.
    In the first case $V = 0$.
    In the second case, $(\mathcal W^c/V)_\vartheta = 0$ and so $\mathcal W^c = V$.
\end{proof}
\begin{definition}
    By Frobenius reciprocity we have
    \begin{equation}
        \Hom_N(V,V_\vartheta) \cong \Hom_M(V,\sInd_N^MV_\vartheta).
    \end{equation}
    Let $q_\star$ be the map $V\to \sInd_N^MV_\vartheta$ corresponding to the projection map $q:V\to V_\vartheta$.
\end{definition}
\begin{thm}
    \label{thm:c_ind}
    Let $V$ be a smooth representation of $M$.
    The the map $q_\star:V\to\sInd_N^MV_\vartheta$ induces an isomorphism $V(N)\cong \cInd_N^MV_\vartheta$.
\end{thm}
\begin{corollary}
    Let $V$ be an irreducible smooth representation of $M$.
    Either
    \begin{enumerate}
        \item $\dim_\C V = 1$ and $V$ is the inflation of a character of $M/N\cong F^\times$, or
        \item $\dim_\C V$ is infinite and $V\cong \cInd_N^M\vartheta$, for any character $\vartheta \ne 1$ of $N$.
    \end{enumerate}
    In case (1), $\dim_\C V_N = 1$ and $V_\vartheta = 0$ for $\vartheta \ne 1$.
    In case (2), $V_N = 0$ and $\dim_\C V_\vartheta = 1$ for all $\vartheta\ne 1$.
\end{corollary}
\section{Jacquet functor}
\begin{definition}
    Let $V$ be a smooth $G$-representation.
    Then $V/V(N)$ is a smooth $B$-representation on which $N$ acts trivially and so $V/V(N)$ is naturally a $T = B/N$-representation.
    We call $V_N$ the Jacquet module of $V$ at $N$.
    This process induces an exact additive functor $\Smo_G \to \Smo_T$.
\end{definition}
\begin{proposition}
    The Jacquet functor is left adjoint to parabolic induction.
\end{proposition}
\begin{proposition}
    Let $V$ be a smooth irreducible representation of $G$.
    The following are equivalent:
    \begin{enumerate}
        \item $V_N\ne 0$
        \item $V$ is isomorphic to a subrepresentation of $\sInd_B^G\chi$ where $\chi$ is a character of $T$.
    \end{enumerate}
\end{proposition}
\begin{proof}
    $(1)\Leftarrow(2)$ Obvious.
    $(1)\Rightarrow(2)$ We just need to show that $V_N$ is a finitely generated $T$-representation.
\end{proof}
\begin{definition}
    If $V_N = 0$ we call $V$ cuspidal (or supercuspidal).
    Otherwise we say $V$ is in the principal series.
\end{definition}
\begin{proposition}
    Any character of $G$ is of the form $\phi\circ\det$, for some character $\phi$ of $F^\times$.
\end{proposition}
\begin{proof}
    If $\chi$ is a character then its kernel contains $\SL_2(F)$ (the commutator subgroup of $G$).
    The result follows from the fact that $\det$ is surjective and open.
\end{proof}
\begin{definition}
Let $U$ be a smooth $T$-representation and $w = \begin{pmatrix} 0 & 1 \\ 1 & 0 \end{pmatrix}$.
    Write $U^w$ for the twisted representation where $t$ acts like $wtw^{-1}$.
\end{definition}
\begin{definition}
    Let $U$ be a smooth $T$-representation and $\alpha_U:\sInd_B^GU\to U$ be the canonical map.
    It is a map of $B$-representation, and give rise to a map $(\sInd_B^GU)_N\to U$ which we also call $\alpha_U$.
\end{definition}
\begin{remark}
    $G = B \cup BwN = B\cup TwN$.
\end{remark}
\begin{lemma}
    Let $U$ be a smooth $T$-repre-sentation and $f\in \sInd_B^GU$.
    Then $f\in \ker\alpha_U$ iff there is a compact open subgroup $N_0$ of $N$ such that $\supp f\subseteq BwN_0$.
\end{lemma}
\begin{proof}
    There exists a compact open subgroup $N_0'$ of $N'$ such that $N_0'$ fixes $f$.
    Thus $f$ vanishes on $BN_0'$.
    But $\supp(f)$ is a union of right $B$ cosets and 
    \begin{equation}
        B\begin{pmatrix}1 & 0 \\ x & 0\end{pmatrix} = Bw\begin{pmatrix} 1 & x^{-1} \\ 0 & 1\end{pmatrix}.
    \end{equation}
    It is easy to see that if $U_0$ is a compact open subgroup of $F$ then $F\backslash (U_0\backslash\set{0})^{-1}$ is contained in a compact open subgroup of $F$ and so there exists a compact open subgroup $N_0$ such that $\supp(f) \subseteq BwN_0$.
\end{proof}
\begin{remark}
    $\set{1}\cup\set{wn:n\in N}$ is a complete set of right $B$ coset representatives.
\end{remark}
\begin{lemma}
    For $f\in C_c^\infty(N), t\in T$ we have
    \begin{equation}
        \int_Nf(txt^{-1})d\mu_N(x) = \delta_B(t)\int_Nf(x)d\mu_N(x).
    \end{equation}
\end{lemma}
\begin{definition}
    Given $f\in \ker\alpha_U$ define $f_N:T\to U$ by
    \begin{equation}
        f_N(x) = \int_N f(xwn) d\mu_N(n) = xf_N(1).
    \end{equation}
\end{definition}
\begin{lemma}
    There exists a compact open subgroup $N_0$ of $N$ such that
    \begin{equation}
        \int_{N_0}f(xn)d\mu_N(n) = 0,\quad \forall x\in G.
    \end{equation}
    iff $f_N(t) = 0$ for all $t\in T$.
\end{lemma}
\begin{proof}
    $(\Rightarrow)$ Let $N_1$ be a compact open subgroup such that $\supp(f) \subseteq BwN_1$.
    Let $\set{a_1,\dots,a_k}$ be elements such that $N_1\subseteq \cup_ia_iN_0$.
    Then 
    \begin{align}
        0 &= \sum_i\int_{N_0}f(wa_in)d\mu_N(n) = \int_{\cup_ia_iN_0}f(wn)d\mu_N(n) \nonumber \\
          &= \int_Nf(wn)d\mu_N(n) = f_N(1).
    \end{align}
    It follows that $f_N(t) = 0$ for all $t\in T$.
    $(\Leftarrow)$ Let $N_1$ be as before and set $N_0 = N_1$.
    Then since $f_N(1) = 0$ we have
    \begin{equation}
        \int_{N_0}f(wn)d\mu_N(n) = 0.
    \end{equation}
    Note that $G = B\cup BwN$.
    If $x\in B$ then trivially
    \begin{equation}
        \int_{N_0}f(xn)d\mu_N(n) = 0.
    \end{equation}
    If $x\in BwN$, wlog $x = wn$ for some $n$.
    Then
    \begin{equation}
        \int_{N_0}f(wnn_0)d\mu_N(n_0) = \int_{nN_0}f(wn_0)d\mu_N(n_0) = 0
    \end{equation}
    since if $n\in N_0$, ok, and otherwise, $f$ is zero on $wnN_0$.
\end{proof}
\begin{lemma}
    (Restriction-Induction Lemma).
    Let $U$ be a smooth $T$-repre-sentation.
    Then there is an exact sequence of $T$-representations
    \begin{equation}
        0 \to U^w\otimes \delta_B^{-1} \to (\sInd_B^GU)_N \xrightarrow{\alpha_U} U \to 0.
    \end{equation}
\end{lemma}
\begin{proof}
    Let $V$ be the kernel of the canonical $B$-homomorphism $\sInd_B^GU\to U$.
    It suffices to determine what $V_N$ is.
    By the previous lemmma, the kernel of the map $f\mapsto f_N(1)$ is $V(N)$.
    Thus we obtain a bijection $V_N\to U$.
    Moreover for $f\in V, t\in T$
    \begin{align}
        (tf)_N(x) &= \int_Nf(xwnt)d\mu_N(n) \nonumber \\
                  &= \delta_B(t^{-1})\int_Nf(xt^wwn)d\mu_N(n) \nonumber \\
                  &= \delta_B(t^{-1})(t^wf_N)(x).
    \end{align}
    Thus the map $V_N\to \delta_B^{-1}\otimes U^w$ is an isomorphism of $T$-representations.
\end{proof}
\begin{proposition}
    Let $V$ be a smooth irreducible representation of $G$ which is not cuspidal. 
    Then $V$ is admissable.
\end{proposition}
\begin{proof}
    $V_N \ne 0$ and so $V$ is isomorphic to a subrepresentation of $\sInd_B^G\chi$ for some character $\chi$ of $T$.
    It thus suffices to show that $\sInd_B^G\chi$ is admissable.
    Let $K_0 = \GL_2(\mf o)$ and $K\subseteq K_0$ a compact open subgroup.
    Then since $B\backslash G/K$ is finite, $(\sInd_B^G\chi)^K$ is also finite dimensional.
\end{proof}
\begin{definition}
    Let $\phi$ be a character of $F^\times$ and $(\pi,V)$ be a smooth representation of $G$.
    Define $(\phi\pi,V)$ to be the representation $\phi\circ\det\otimes V$.
\end{definition}
\begin{proposition}
    Let $\chi$ be a character of $T$.
    Then $\sInd_B^G(\phi\cdot\chi) \cong \phi\sInd_B^G\chi$.
\end{proposition}
\begin{proof}
    The map $\phi\sInd_B^G\chi \to \sInd_B^G(\phi\cdot\chi)$ given by $f\mapsto (x\mapsto \phi\circ\det(x)f(x))$ is an isomorphism of $G$-representations.
\end{proof}
\section{Irreducibility criterion}
\begin{thm}
    \label{thm:irr_crit}
    Let $\chi = \chi_1\otimes \chi_2$ be a character of $T$, and set $X = \sInd_B^G\chi$.
    \begin{enumerate}
        \item X is reducible iff $\chi_1\chi_2^{-1}$ is either the trivial character or $x\mapsto\abs{x}^2$,
        \item If $X$ is reducible then:
            \begin{enumerate}
                \item the composition length of $X$ is $2$,
                \item one composition factor has dimension 1, the other of infinite dimension,
                \item $X$ has a $1$-dimensional $G$-subspace iff $\chi_1\chi_2^{-1} = 1$
                \item $X$ has a $1$-dimensional $G$-quotient iff $\chi_1\chi_2^{-1}(x) = \abs{x}^2$, $x\in F^\times$.
            \end{enumerate}
    \end{enumerate}
\end{thm}
\begin{definition}
    Let $V = \set{f\in X: f(1) = 0}$ and $W = V(N)$.
    For $f\in V$ define $f_N\in C_c^\infty(N)$ by $f_N(n) = f(wn), n\in N$.
\end{definition}
\begin{proposition}
    The map $V\to C_c^\infty(N), f\mapsto f_N$ is a $N$-isomorphism.
\end{proposition}
\begin{remark}
    We can give $C_c^\infty(N)$ the structure of a $M$-representation by letting $s = \begin{pmatrix}a&0\\0&1\end{pmatrix}$ act by
    \begin{equation}
    s.\phi\left(\begin{pmatrix}1&x\\0&1\end{pmatrix}\right) = \chi_2(a)\phi\left(\begin{pmatrix}1&a^{-1}x\\0&1\end{pmatrix}\right)
    \end{equation}
    where $\phi\in C_c^\infty(N)$.
    It is then an easy check to see that the map $V\to C_c^\infty(N)$ is an isomorphism of $M$-representations.
\end{remark}
\begin{remark}
    Let $\vartheta$ be a character of $N$.
    Then the map $C_c^\infty(N)\to C_c^\infty(N), f\mapsto \vartheta f$ is a linear isomorphism that sends $V(N)$ to $V(\vartheta)$.
\end{remark}
\begin{proposition}
    Then $W$ is an irreducible $B$-representation.
\end{proposition}
\begin{proof}
    By the restriction-induction lemma, $V_N$ has dimension $1$.
    It follows by the previous remark that $V_\vartheta$ also has dimension $1$.
    Since $W\ne0$, the inclusion $W\to V$ induces an isomorphism $W_\vartheta\to V_\vartheta$.
    It follows that $W_\vartheta \cong \vartheta$ and so by theorem \ref{thm:c_ind} that
    \begin{equation}
        W = W(N) \cong \cInd_N^M\vartheta
    \end{equation}
    which we know is irreducible.
\end{proof}
\begin{corollary}
    \label{cor:comp_series}
    $X$ has composition length $3$ as a $B$ or $M$-representation.
    Two of the composition factors have dimension one, and the third is of infinite dimension.
    It has composition length at most $3$ as a $G$-representation.
\end{corollary}
\begin{proposition}
    The following are equivalent:
    \begin{enumerate}
        \item $\chi_1 = \chi_2$,
        \item $X$ has a one-dimensional $N$-subspace.
    \end{enumerate}
    When these conditions hold,
    \begin{enumerate}
        \item $X$ has a unique one dimensional $N$-subspace $X_0$,
        \item $X_0$ is a $G$-subspace, and it is not contained in $V$.
    \end{enumerate}
\end{proposition}
\begin{proof}
    $(1)\Rightarrow (2)$ Wlog $\chi_1 = \chi_2 = 1$.
    The contant functions then form a one-dimensional $G$-subspace of $X$ not contained in $V$.
    $(2)\Rightarrow (1)$ Suppose $f\in X$ spans an $N$-stable subspace of dimension $1$.
    Then $N$ acts on $f$ as a character and so $\supp(f)$ is a union of $B\backslash G/N$ double cosets. 
    If $f(1) = 0$ then $\supp(f) = BwN$, but this is impossible since $f\in V$ implies that $\supp(f) = BwN_0$ for some compact open $N_0\subseteq N$.
    Thus $f\not\in V$ and so the canonical $N$-map $X\to \C = X/V$ identifies $\C f$ with the trivial representation and so $N$ fixes $f$.
    Moreover 
    \begin{align}
    f(w) &= \begin{pmatrix}1 & x \\ 0 & 1\end{pmatrix}f(w) = f\left(\begin{pmatrix}1 & x^{-1} \\ 0 & 1\end{pmatrix}\begin{pmatrix}-x^{-1} & 0 \\ 0 & x\end{pmatrix}\begin{pmatrix}1 & 0 \\ x^{-1} & 1\end{pmatrix}\right) \nonumber \\
         &= \chi_1(-1)\chi_1^{-1}\chi_2(x)f\left(\begin{pmatrix}1 & 0 \\ x^{-1} & 1\end{pmatrix}\right).
    \end{align}
    But for sufficiently large $\abs x$, $f$ is fixed by $\begin{pmatrix}1 & 0 \\ x^{-1} & 1\end{pmatrix}$ and so 
    \begin{equation}
        f(w) = \chi_1(-1)\chi_1^{-1}\chi_2(x)f(1)
    \end{equation}
    for sufficiently large $\abs x$.
    It follows that $\chi_1=\chi_2 =: \phi$.
    Moreover $f(g) = \phi(\det g)f(1)$ and so $\C f$ is also a $G$-subspace.

    This shows that $(1)\Leftrightarrow (2)$.
    Moreover, we have showed that the one-dimensional subspace is uniquely determined, is a $G$-subspace and is not contained in $V$.
\end{proof}
\begin{proof}
    (of theorem \ref{thm:irr_crit}).
    $(\Rightarrow)$ Suppose $X$ is reducible. Then it has composition length $2$ or $3$.
    By corollary \ref{cor:comp_series}, $X$ has either a finite dimensional $G$-subspace or $G$-quotient.
    If $X$ has a finite dimensional subspace then it has a one dimensional $N$-subspace, call it $L$, and $\chi_1 = \chi_2 =: \phi$.
    Moreover, $G$ acts on $L$ as the character $\phi\circ \det$, and $L\cap V = 0$.
    Thus $Y := X/L\cong V$ as $B$-representations.
    Now suppose $X$ has $G$-length $3$.
    Then $Y$ has $G$-length $2$.
    But $V$ has $B$-length $2$ and a unique $B$-quotient which is of dimension $1$.
    This gives a $G$-quotient of $Y$ on which $G$ must act as a character $\phi'\circ\det$.
    This would force $\phi'\otimes\phi'$ to be a factor of $Y_N \cong (\phi\otimes \phi)\cdot \delta_B^{-1}$, but this is clearly impossible.
    Thus $Y$ has $G$-length $2$.

    Now suppose $X$ has a finite dimensional $G$-quotient.
    Then $\check X$ has a finite dimensional $G$-subspace and by the duality theorem $\check X \cong \sInd_B^G(\delta_B^{-1}\check \chi)$.
    We are thus in the previous case and the result follows.
    Thus we have shown that if $X$ is reducible it has the stated form.

    $(\Leftarrow)$ This follows from the previous proposition and its dual.
\end{proof}
\section{Classification of irreducible representations}
\begin{proposition}
    Let $\chi,\xi$ be characters of $T$.
    Then
    \begin{equation}
    \dim_\C\Hom_G(\sInd_B^G\chi,\sInd_B^G\xi) = \begin{cases} 1 & \text{if $\xi = \chi$ or $\xi = \chi^w\delta_B^{-1}$} \\ 0 & \text{otherwise}\end{cases}.
    \end{equation}
\end{proposition}
\begin{proof}
    We have that $(\sInd_B^G\chi)_N$ fits into the short exact sequence
    \begin{equation}
        0\to \chi^w\delta_B^{-1} \to (\sInd_B^G\chi)_N \to \chi \to 0.
    \end{equation}

    If $\chi = \chi^w\delta_B^{-1}$ then $\chi_1(x) = \abs{x}\chi_2(x)$ and so $\Ind_B^G\chi$ is irreducible.
    The result is then obvious.

    If $\chi \ne \chi^w\delta_B^{-1}$ then the sequence splits (WHY?).
    The result is then obvious.
\end{proof}
\begin{definition}
    The irreducible quotient of $\sInd_B^G1_T$ is called $\St_G$, the Steinberg representation of $G$.
\end{definition}
\begin{remark}
    Let $\phi$ be a character of $F^\times$.
    Then we have an exact sequence
    \begin{equation}
        0 \to \phi_G \to \sInd_B^G\phi_T \to \phi\cdot\St_G \to 0.
    \end{equation}
    Taking the dual of this sequence when $\phi = 1$ we get
    \begin{equation}
        0 \to \check \St_G \to \sInd_B^G\delta_B^{-1} \to 1_G \to 0.
    \end{equation}
    The proposition then implies that $\St_G\cong \check \St_G$.
\end{remark}
\begin{definition}
    Let $U$ be a smooth representation of $T$.
    Define
    \begin{equation}
        \ui_B^GU = \sInd_B^G(\delta_B^{-1/2}\otimes U).
    \end{equation}
    This has the connvenient property that $(\ui_B^GU)^\vee \cong \ui_B^G\check U$.
    Using this functor instead of parabolic induction we get the following result.
\end{definition}
\begin{proposition}
    \begin{enumerate}
        \item Let $\chi = \chi_1\otimes \chi_2$ be a character of $T$.
            Then $\ui_B^G\chi$ is reducible iff $\chi_1\chi_2^{-1}$ is equal to one of $x\mapsto \abs{x}^{\pm1}$.
            Equivalently iff $\chi = \phi\cdot\delta_B^{\pm1/2}$.
        \item Let $\chi,\xi$ be characters of $T$.
            Then $\Hom_G(\ui_B^G\chi,\ui_B^G\xi)$ is not zero iff $\xi = \chi$ or $\xi = \chi^w$.
    \end{enumerate}
\end{proposition}
\begin{thm}
    The following is a complete list of isomorphism classes of irreducible non-cuspidal representations of $G$
    \begin{enumerate}
        \item $\ui_B^G\chi$, where $\chi \ne \phi \cdot \delta_B^{\pm1/2}$ and $\chi$ is a character of $F^\times$,
        \item $\phi\circ\det$ where $\phi$ ranges over the character of $F^\times$,
        \item the special representations, $\phi\cdot \St_G$ where $\phi$ ranges over the characters of $F^\times$.
    \end{enumerate}
    The classes in this list are all distinct except we have $\ui_B^G\chi \cong \ui_B^G\chi^w$.
\end{thm}
\begin{proof}
    Follows from above work.
\end{proof}
\section{Cuspidal representations}
\begin{definition}
    Let $(\pi,V)$ be a smooth $G$-representation.
    Let $v\in V, \check v\in \check V$ and define $\gamma_{\check v\otimes v}:g\mapsto \langle \check v,gv\rangle$.
    This is a smooth function and is clearly bilinear in $v,\check v$ and so we have a map $\check V\otimes V\to C_c^\infty(G)$.
    If we endow $\check V\otimes V$ with the obvious strucutre of a $G\times G$-representation, and let $G\times G$ act on $C_c^\infty(G)$ by left translation in the first factor and right translation in the second factor, then this map is a $G\times G$-homomorphism.
    Write $C(\pi)$ for the image of this map.
    We call $C(\pi)$ the matrix coefficients of $\pi$.
\end{definition}
\begin{remark}
    If $V$ is irreducible and $z\in Z$ then for $\gamma\in C(\pi)$ we have
    \begin{equation}
        \gamma(zg) = w_\pi(z)\gamma(g)
    \end{equation}
    where $w_\pi$ is the central character of $V$.
\end{remark}
\begin{definition}
    We say that $V$ is $\gamma$-cuspidal if every $\gamma\in C(\pi)$ is compactly supported modulo $Z$.
\end{definition}
\begin{proposition}
    Let $V$ be an irreducible $\gamma$-cuspidal representation of $G$.
    Then $V$ is admissable.
\end{proposition}
\begin{proof}
    Suppose $V$ is not admissable.
    Then let $K$ be a compact open subgroup such that $V^K$ is not finite dimensional.
    Note that $V^K$ has countably infinite dimension and so $\check V^K = (V^K)^*$ has uncountable dimension.
    But for a fixed non-zero $v\in V^K$ we have an injective map $\Gamma_v:\check V^K\to C(\pi), \check v\mapsto \gamma_{\check v\otimes v}$.
    If $f$ lies in the image of this map then is satisfies
    \begin{equation}
        f(zkgk') = w_\pi(z)f(g),\quad g\in G,z\in Z,k,k'\in K
    \end{equation}
    and is supported by a finite union of double cosets $ZKgK$.
    Thus the dimension of $\Gamma_v(\check V^K)$ is at most countable.
    This is a contradiction.
\end{proof}
\begin{proposition}
    Let $V$ be an irreducible admissable representation of $G$, and suppose that some non-zero coefficient of $\pi$ is compactly supported modulo $Z$.
    Then $\pi$ is $\gamma$-cuspidal.
\end{proposition}
\begin{lemma}
    Let $V$ be a cuspidal representation.
    Let $t = \begin{pmatrix}\bar w & 0 \\ 0 & 1\end{pmatrix}$, $v\in V$, and $\check v\in \check V$.
    Then there exists an $m\ge 0$ such that $\gamma_{\check v\otimes v}(t^n) = 0$ for all $n\ge m$.
\end{lemma}
\begin{thm}
    Let $V$ be an irreducible smooth representation of $G$.
    Then $V$ is cuspidal iff it is $\gamma$-cuspidal.
\end{thm}
\begin{proof}
    $(\Rightarrow)$ Let $T^+ = \set{t^n:n\in \N_0}$.
    Then $T^+$ is a set of representatives for $ZK\backslash G/K$ where $K = \GL_2(\mf o)$.
    Let $f = \gamma_{\check v\otimes v}$ be a non-zero coefficient of $\pi$, and $K'$ a compact open normal subgroup of $K$ fixing both $\check v$ and $v$.
    Let $k_1,\dots,k_n$ be coset representatives of $K/K'$
    If $g\in G$, then there is a $n\ge 0$ such that
    \begin{equation}
        ZKgK = ZKt^nK = \bigcup_{i,j}ZK'k_i^{-1}t^nk_jK'
    \end{equation}
    and so $\supp(f) \subseteq \bigcup_{i,j}ZK'(\supp(f_{ij})\cap T^+)K'$ where $f_{ij}$ is the function $x\mapsto k_ixk_j^{-1}$.
    By the previous lemma, this set is compactly supported modulo $Z$.
    It follows that $\pi$ is $\gamma$-cuspidal.

    $(\Leftarrow)$ Boring and technical.
\end{proof}
\begin{corollary}
    Every irreducible smooth representation of $G$ is admissable.
\end{corollary}
\section{Compact induction and cuspidal representations}
\begin{thm}
    \label{thm:cind_irr}
    Let $K$ be an open subgroups of $G = \GL_2(F)$, containing and compact modulo $Z$.
    Let $W$ be a smooth representation of $K$ and suppose that $g\in G$ intertwines $W$ iff $g\in K$.
    Then $\cInd_K^GW$ is cuspidal and irreducible.
\end{thm}
\begin{proof}
    Write $X = \cInd_K^GW$.
    By lemma \ref{lem:cind_irr} we know that $X$ is irreducible and so it suffices to show that $X$ is $\gamma$-cuspidal.

    Let $\psi:W\to X$ be the canonical $K$-homomorphism which identifies $W$ with the $K$-subrepresentation of functions supported in $K$.
    Both $G$ and $K$ are unimodular and so $\check X \cong \sInd_K^G\check W$.
    The maps $\check W\to \cInd_K^G\check W\to \sInd_K^G\check W$ identifies $\check W$ with the functions in $\check X$ with support contained in $K$.
    Let $w\in W\subseteq X,\check w\in \check W\subseteq \check X$.
    Then $\gamma_{\check w\otimes w}$ has suuport contained in $K$ and is non-zero.
    Thus $X$ is $\gamma$-cuspidal as required.
\end{proof}
\subsection{Example}
Let $G = \GL_2(F)$, $K = \GL_2(\mf o)$, $K_1 = 1+\mf p M_2(\mf o)$ and $I_1 = 1 + \begin{pmatrix} \mf p & \mf o \\ \mf p & \mf p\end{pmatrix}$.
\begin{lemma}
    For $i = 1,2$, let $\tilde U_i$ be an irreducible representation of $\GL_2(k)$, and let $U_i$ denote inflation of $\tilde U_i$ to $K$.
    Suppose that $\tilde U_1$ is cuspidal.
    \begin{enumerate}
        \item The representations $U_i$ intertwine in $G$ iff $\tilde U_1\cong \tilde U_2$.
        \item An element $g\in G$ intertwines $U_1$ iff $g\in ZK$.
    \end{enumerate}
\end{lemma}
\begin{thm}
    Let $V$ be a smooth irreducible representation of $G$, and suppose that $V$ contains the trivial character of $K_1$.
    Then exactly one of the following holds:
    \begin{enumerate}
        \item $V$ contains a representation $U$ of $K$, inflated from an irreducible cuspidal representation $\tilde U$ of $\GL_2(k)$,
        \item $V$ contains the trivial character of $I_1$.
    \end{enumerate}
    In the first case, $V$ is cuspidal, and there exists a representation $W$ of $ZK$ such that $\Res_K^{ZK}W \cong U$ and $V \cong \cInd_{ZK}^GW$.
\end{thm}
\begin{proof}
    $V^{K_1}$ is a $K$-representation on which $K_1$ acts trivially and so is naturally a direct sum of $\GL_2(k)$-representations.
    Let $U$ be one of the irreducible $K$-summands in flated from $\tilde U$.
    Then either $\tilde U$ is cuspidal or it is not.
    If it is not cuspidal then it contains the trivial character of $N(k)$, and so $U$ contains the trivial character on $I_1$.
    It follows from the previous lemma and proposition \ref{prop:intertwine} that both of these cases cannot happen.

    Finally, assume $\tilde U$ is cuspidal.
    $U$ is clearly also a $KZ$-representation and so we have a non-trivial $KZ$-homomorphism $U\to V$.
    By Frobenius reciprocity this gives a $G$-homomorphism $\cInd_{KZ}^GU\to V$.
    But by the previous lemma and theorem \ref{thm:cind_irr}, $\cInd_{KZ}^GU$ is irreducible and so $V\cong \cInd_{KZ}^GU$.
\end{proof}
\chapter{Orbital Integrals and Nilpotent Orbits}
\section{Structure theory}
\begin{definition}
    Given $\psi = \alpha + n$ where $\alpha\in \Phi$, $n\in \Z$, define
    \begin{equation}
        \mf g_\psi = \set{x_\alpha(t):t\in \mf p^n}.
    \end{equation}

    Define $T_0 = \set{(t_1,\dots,t_n)\in T:t_i\in R^\times}$ and for $r\in \R$
    \begin{align}
        T_r &= \set{t\in T_0:\nu(1-\chi(t)) \ge r, \forall\chi\in X^*(T)} \nonumber \\
            &= \set{t\in T_0 : t_j \in 1+\bar w^{\lceil r\rceil}.R, 1\le j \le n}.
    \end{align}

    Similarly define
    \begin{equation}
        \mf t_r = \set{t : t_j \in \bar w^{\lceil r\rceil}.R, 1\le j \le n}.
    \end{equation}

    Given $x\in \mathcal A(T)$ and $r\in \R$ define
    \begin{equation}
        \mf g_{x,r} = \mf t_r \oplus \sum_{\psi\in\Psi:\psi(x)\ge r}\mf g_\psi
    \end{equation}
    and
    \begin{equation}
        \mf g_{x,r^+} = \mf t_r \oplus \sum_{\psi\in\Psi:\psi(x)> r}\mf g_\psi.
    \end{equation}

    Similarly define
    \begin{equation}
        G_{x,r} = \langle T_r, U_\psi\rangle_{\phi\in\Psi:\psi(x)\ge r}
    \end{equation}
    and
    \begin{equation}
        G_{x,r^+} = \langle T_r, U_\psi\rangle_{\phi\in\Psi:\psi(x)> r}
    \end{equation}
\end{definition}
\begin{remark}
    \begin{enumerate}
        \item If $r\le s$ then $\mf g_{x,r}\supseteq \mf g_{x,s}$, $G_{x,r}\supseteq G_{x,s}$.
        \item $\mf g_{x,r}.\mf g_{y,s}\subseteq \mf g_{x,r+s}$.
        \item $G_{x,r}$ stabilises $\mf g_{x,r}$ and $\mf g_{x,r^+}$.
    \end{enumerate}
\end{remark}
\begin{lemma}
    Let $x,y\in \mathcal B$, and let $r\in \R$.
    Then $\mf g_{x,r}\subseteq \mf g_{y,r}+\mathcal N$.
\end{lemma}
\begin{definition}
    Let $r\in \R$.
    Define
    \begin{equation}
        \mf g_r = \cup_{x\in \mathcal B} \mf g_{x,r}.
    \end{equation}
\end{definition}
\begin{definition}
    A $G$-domain of $\mf g$ is an invariant clopen subset of $\mf g$.
\end{definition}
\begin{thm}
    Let $r\in \R$.
    Then
    \begin{equation}
        \mf g_r = \cap_{x\in \mathcal B}(\mf g_{x,r}+\mathcal N).
    \end{equation}
\end{thm}
\begin{corollary}
    $\mf g_r$ is a $G$-domain.
\end{corollary}
\begin{remark}
    \begin{equation}
        \mf g_r = \set{X\in \mf g: \nu(e_X)\ge r \text{ for all eigenvalues $e_X$ of $X$}}
    \end{equation}
    and
    \begin{equation}
        \mathcal N = \bigcap_r \mf g_r.
    \end{equation}
\end{remark}
\section{Orbital integrals}
\begin{thm}
    Let $Y\in \mf g$. 
    Then there exists a $G$-invariant measure $dg^*$ on $\mathcal O_Y$.
\end{thm}
\begin{remark}
    If $Y$ is semisimple then $\mathcal O_Y$ is closed and so we can define the distribution $f\mapsto \int_{G/C_G(Y)}f(^gY)dg^*$ for $f\in C_c^\infty(\mf g)$.
\end{remark}
\begin{definition}
    Define the subspace $D_r$ of $C_c^\infty(\mf g)$ by 
    \begin{equation}
        D_r := \sum_{x\in \mathcal B}C_c(\mf g/\mf g_{x,r})
    \end{equation}
    and define $D_{r^+}$ similarly.
\end{definition}
\begin{proposition}
    The fourier transform gives bijective maps
    \begin{align}
        D_{r^+} &\leftrightarrow C_c^\infty(\mf g_{-r}) \nonumber \\
        D_{r} &\leftrightarrow C_c^\infty(\mf g_{(-r)^+}). \nonumber
    \end{align}
\end{proposition}
\section{Nilpotent orbits}
Help.
\section{Fourier transforms}
\begin{definition}
    $G$ acts on $C_c^\infty(\mf g)$ in the obvious way.
    Write $J(\mf g)$ for the space of invariant distributions on $\mf g$.
    For $T\in J(\mf g)$, define its fourier transform $\hat T$ by
    \begin{equation}
        \hat T(f) = T(\hat f)
    \end{equation}
    for $f\in C_c^\infty(\mf g)$.
\end{definition}
\begin{thm}
    Let $T\in J(\mf g)$.
    Then there exists a $\hat T\in L_{loc}^1(\mf g)$ such that for all $f\in C_c^\infty(\mf g)$
    \begin{equation}
        \hat T(f) = \int_{\mf g}\hat T(X)f(X)dX.
    \end{equation}
\end{thm}
\begin{definition}
    Let $K$ be a compact open subgroup of $G$.
    For $X\in \mf g^{rss}$ define the function 
    \begin{equation}
        \eta_X:\mf g\to \C, \quad Y\mapsto \int_K\Lambda(\langle Y,^kX\rangle )dk.
    \end{equation}
\end{definition}
\begin{thm}
    Let $K$ be any compact open subgroup of $G$ and let $dk$ be the normalised Haar measure on $K$. 
    For all $X\in \mf g^{rss}$ we have
    \begin{equation}
        \hat{\mathcal O}_\mu(X) = \mathcal O_\mu(\eta_X).
    \end{equation}
\end{thm}
\begin{thm}
    Let $r\in \R$.
    If $T\in J(\mf g_r)$, then $\hat T$ is represented on $\mf g^{rss}$ by $X\mapsto T(\eta_X)$.
\end{thm}
\begin{proof}
    The hard part of the proof is showing that the map from $\mf g^{rss}$ to $C^\infty(\mf g)$, $X\mapsto \eta_{X,r}:=\eta_X 1_{\mf g_r}$ is locally constant.
    Assuming this result we get that there exists a finite collection of open compact disjoint subsets $\set{w_i}_i$ of $\mf g^{rss}$ such that $X\mapsto \eta_X$ and $f$ are constant on $w_i$
    \begin{align}
        \int_{\mf g} f(X) T(\eta_X) dX &= \sum_{i} \abs{w_i} f(X_i) T(\eta_{X_i}) \nonumber \\
                                       &= T\left(\sum_{i} \abs{w_i} f(X_i) \eta_{X_i}\right) \nonumber \\
                                       &= T\left(Y\mapsto \int_{\mf g}f(X)\eta_X(Y)dX\right) \nonumber \\
                                       &= T\left(Y\mapsto \int_{\mf g}f(X)\int_K\Lambda(\langle Y,^kX\rangle))dkdX\right) \nonumber \\
                                       &= T\left(Y\mapsto \int_K \hat f(^kY)dk\right) \nonumber \\
                                       & = T(\hat f).
    \end{align}
\end{proof}
\section{Character distribution}
\begin{definition}
    Let $f\in C_c^\infty(G)$ and $(\pi,V)$ be an admissable representation of $G$.
    Note that the map $\pi(f):V\to V$ can be thought of as a map $V^k\to V^K$ where $K$ is a compact open subgroup of $G$ that fixes $f$ by both left and right translation.
    Define $\tr(\pi(f))$ to be the trace of this map.
    The character distribution of $\pi$ is then the map $\Theta_\pi:C_c^\infty(G)\to \C$ given by $f\mapsto \tr(\pi(f))$.
\end{definition}
\begin{definition}
    Let $(\pi,V)$ be an admissable representation of $G$.
    We define the depth, $\rho(\pi)$ of $(\pi,V)$ to be 
    \begin{equation}
        \rho(\pi) = \min(r\in \Q_\ge:\exists x\in \mathcal O, V^{G_{x,r^+}} \ne 0).
    \end{equation}
\end{definition}
\begin{proposition}
    If $(x,r)\in \mathcal A(T)\times \R_{\ge0}$ with $V^{G_{x,r^+}}\ne 0$ then $r\ge \rho(\pi)$.
\end{proposition}
\subsection{Elementrary Kirillov theory}
\begin{proposition}
    Let $r\in \R_{\ge}$. 
    Then
    \begin{equation}
        \widehat{G_{x,r^+}/G_{x,(2r)^+}} \cong \mf g_{x,-2r}/\mf g_{x,-r}.
    \end{equation}
\end{proposition}
\begin{proof}
    First note that $G_{x,r^+}/G_{x,(2r)^+} \cong \mf g_{x,r^+}/\mf g_{x,(2r)^+}$.
    Now let $\bar X\in \mf g_{x,-2r}/\mf g_{x,-r}$.
    Define $\psi_{\bar X}:\mf g_{x,r^+}/\mf g_{x,(2r)^+}\to \C$ by $\bar Y\mapsto \Lambda(\tr(X.Y))$.
    It is easy to see that this is well-defined.

    This map is a bijection (why?).
\end{proof}
\begin{proposition}
    Let $r,s\in \R_{\ge}$ and $x,y\in \mathcal B$.
    Fix a character $\bar \sigma$ of $G_{x,r^+}/G_{x,(2r)^+}$ and a character $\bar \tau$ of $G_{x,s^+}/G_{x,(2s)^+}$.
    Let $X_\sigma$ and $X_\tau$ be representatives of $\bar\sigma$ and $\bar\tau$ respectively.
    Then there exists an $g\in G$ such that
    \begin{equation}
        ^g(X_\tau+\mf g_{y,-s})\cap (X_\sigma+\mf g_{x,-r}) \ne \emptyset.
    \end{equation}
\end{proposition}
\begin{proof}
    Let $V_\sigma\subseteq V$ be a one-dimensional subspace of $V$ on which $G_{x,r^+}$ acts by $\sigma$, and similarly define $V_\tau$.
    Since $V$ is irreducible there exists a $g\in G$ such that the image of $gV_\sigma$ under the projection $V\to V_\tau$ is nonzero.
    Rest is blah.
\end{proof}
\begin{proposition}
    Let $s > \rho(\pi)$.
    If $\hat\Theta_\pi(f) \ne 0$ then $\supp(f)\cap \mf g_{(-s)^+} \ne 0$.
\end{proposition}
\begin{proof}
    Note there is a $x\in \mathcal A$ such that the trivial representation of $G_{x,\rho(\pi)}$ occurs in $\pi$.
    Now let $x\in mathcal B$, and $\bar \tau \in \widehat{G_{y,s}/G_{y,s^+}}$ such that $\tau$ occurs in $\pi$.
    Let $X_\tau+\mf g_{y,(-s)^+}$ be the coset corresponding to $\bar \tau$.
    By the previous proposition there exists an $g\in G$ such that $^g\mf g_{x-\rho(\pi)}\cap (X_\tau + \mf g_{y,(-s)^+}) \ne 0$.
    But
    \begin{equation}
        \mf g_{x,-\rho(\pi)} \subseteq \mf g_{y,-\rho(\pi)} + \mathcal N \subseteq \mf g_{y,(-s)^+} + \mathcal N.
    \end{equation}
    Thus wlog $X_\tau$ is nilpotent.

    Now for $h\in C_c^\infty(\mf g_{\rho(\pi)^+})$ define $\tilde h\in C_c^\infty(G_{\rho(\pi)^+})$ by $\tilde h(g) = h(g-1)$.
    Then define the distribution $\Theta_{\pi,\mf g}$ on $\mf g$ by $\Theta_{\pi,\mf g}(f) = \Theta_{\pi}(\tilde f_{\rho(\pi)})$ where $f_{\rho(\pi)} = f\cdot 1_{\mf g_{\rho(\pi)^+}}$.
\end{proof}
\section{Homogeneity results}
\begin{thm}
    Let $r = k/n$ for $0\le k <n$.
    Then
    \begin{equation}
        \res_{D_{r^+}}J(\mf g_{r^+}) = \res_{D_{r^+}}J(\mathcal N).
    \end{equation}
\end{thm}
\begin{proof}
    ($\GL_1(k)$)
    If $r = 0$, then $D_{r^+} = C_c(k/\mf p)$.
    Thus we need to show 
    \begin{equation}
        \res_{C_c(k/\mf p)}J(\mf p) = \res_{C_c(k/\mf p)}J(\mathcal N).
    \end{equation}
    The right hand side is $1$-dimensional and spanned by the distribution $f\mapsto f(0)$.
    Moreover, the rhs is a subspace of the lhs.
    Since $\GL_1(k)$ is abelian all distributions are invariant.
    Now, if $f\in C_c(k/\mf p)$ and $T\in J(\mf P)$ then writing
    \begin{equation}
        f = \sum_{\bar X\in k/\mf p}c_{\bar X}1_{X+\mf p}
    \end{equation}
    we obtain that $T(f) = T(1_{\mf p})f(0)$.
    Thus the lhs is also one dimensional. 
    This concludes the proof.
\end{proof}
\begin{proof}
    ($\GL_2(k)$)
    Let $r=0$ and fix $T\in J(\mf g_{0^+})$.
    We will show that $T$ is determined by its restriction to $C(\mf k_0/\mf k_1)+C(\mf b_0/\mf b_{1/2})$.

    Fix $f\in D_{0^+}$.
    WLOG $f = 1_{X+\mf g_{x,0^+}}$ where $x\in \mathcal B$ and $X\in \mf g$.
    If $(X+\mf g_{x,0^+}) \cap \mf g_{0^+} = \emptyset$ then $T(f) = 0$.
    Thus suppose the intersection is $\ne \emptyset$.
    Since $\mf g_{0^+} \subseteq \mf g_{x,0^+} + \mathcal N$ we have $(X+\mf g_{x,0^+})\cap \mathcal N \ne \emptyset$ and so wlog $X \in \mathcal N$.

    Up to conjugacy $\mf g_{x,0^+} = \mf k_1$ or $\mf b_{1/2}$.
    \begin{enumerate}
        \item If $\mf g_{x,0^+} = \mf k_1$ then we must have $x = x_0$.
            We have that $X\in \mathcal N \cap (\mf g_{x_0,-m}\backslash \mf g_{x_0,(-m)^+}) = \mathcal N \cap (\mf k_{-m}\backslash \mf k_{1-m})$ for some $m>0$ (if $m=0$ then we are done).
            Since we are free to conjugate by $K_0$, we may assume that 
            \begin{equation}
                X = \begin{pmatrix} 0 & \bar w^{-m}u \\ 0 & 0\end{pmatrix}
            \end{equation}
            with $u\in R^\times$.
            But 
            \begin{equation}
            X \in \mf g_{y_0,(1/2-m)} = \bar w^{-m}\begin{pmatrix} \mf p & R\\ \mf p & \mf p\end{pmatrix}
            \end{equation}
            where $y_0$ is as in the notes and
            \begin{align}
                T(1_{X+\mf k_1}) &= \frac 1{q^2}\sum_{\bar t\in T_m/T_{m^+}}T(1_{^tX+\mf k_1}) \nonumber \\
                                 &= \frac 1{q^2}\sum_{\bar\alpha,\bar\beta\in R/\mf p} T\left(\left[X + \begin{pmatrix}0 & u(\alpha-\beta) \\ 0 & 0\end{pmatrix} + \mf k_1\right]\right) \nonumber \\
                                 &= \frac 1qT(1_{X+\mf b_{1/2}}).
            \end{align}
            Thus we have succeeded in writing $T(f)$ in terms of $T(f')$ where $f'\in D_{0^+}$ which is supported closer to the origin with respect to some other point in the building.
        \item Now suppose $\mf g_{x,0^+} = \mf b_{1/2}$.
            Then $x = y$ for any $y$ in the interior of $C_0$.
            Free to conjugate by $G_{y,0} = B_0$ we may assume that $X$ is one of
            \begin{equation}
            \begin{pmatrix} 0 & \bar w^{-m}u \\ 0 & 0\end{pmatrix}, \quad \begin{pmatrix} 0 & 0 \\ \bar w^{1-m}u & 0\end{pmatrix}
            \end{equation}
            where $u\in R^\times$ and $m>0$ (if $m=0$ we would be done).
    \end{enumerate}
\end{proof}
\section{Generalised Gelfand-Garaev representations}
\begin{definition}
    Let $N$ be a nilpotent element in $\mf g^F$ with associated $\mf{sl}_2$ triple $N = e,h,f$.
    Let $\mathcal O_U$ be the coadjoint orbit of the element $-f$.
    By Kirillov theory $\mathcal O_U$ determines a $\abs{\mathcal O_U}^{1/2}$-dimensional representation $\eta_N$ of $U^F$.
    The induced representation $\Gamma_N = \Ind_{U^F}^{G^F}\eta_N$ is called the generalised Gelfand-Graev representation of $G^F$ associated to $N$.
\end{definition}
\begin{proposition}
    \begin{enumerate}
        \item $\gamma_N$ only depends on the $Ad(G^F)$-orbit of $N$.
        \item The support of $\gamma_N$ is contained in the closure of $Ad(G)(\exp(N))$.
    \end{enumerate}
\end{proposition}
\begin{thm}
    Let $e,h,f\in \mf g_{x,0^+}$ be an $\mf{sl}_2$ triple.
    Let $f_{x,\mathcal O}$ be the generalised Gelfand-Graev representation of $M_x = G_{x,0}/G_{x,0^+}$ attached to $\bar e\in \mf m_x = \mf g_{x,0}/\mf g_{x,0^+}$.
    Then
    \begin{enumerate}
        \item $f_{x,\mathcal O}$ is supported on the topologically unipotent set.
        \item $\hat \mu_{\mathcal O'}(f_{x,\mathcal O}) = 0$ unless $\mathcal O$ lies in the closure $\overline{\mathcal O'}$.
        \item Suppose $\mathcal O_1$ and $\mathcal O_2$ are two nilpotent orbits in $\mf g$ which belong to the same nilpotent orbit in $\mf g$
            \begin{enumerate}
                \item If $\mathcl O_1$ and $\mathcal O_2$ are distinct in $\mf g$, then $\hat \mu_{\mathcal O_1}(f_{x,\mathcal O_2})$.
            \end{enumerate}
    \end{enumerate}
\end{thm}
\end{document}

